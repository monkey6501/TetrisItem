function instanceOfIStageResizeable(e){return"resize"in e}var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(r){n=[6,r],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},UI;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;n._bottom=0,n._centerTop=0,n._centerBottom=0,n.startY=0,n.isCache=!0,n._needLoadResGroupList=[],n._needLoadResItemList=[],n.uiName="",n.type=0,n.isComplete=!1,n.fullScreen=!1;var r=n;return r.uiskinPath=t,n}return __extends(t,e),t.prototype.init=function(e,t){var n=this;this.data=e,n.loadRes()},t.prototype.initSkinView=function(){var e=this;e.isComplete?e.show():this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this),this.skinName=this.uiskinPath},t.prototype.createCompleteEvent=function(e){var t=this;t.isComplete=!0,t.removeEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,this),LanguageManager.getInstance.setModuleLanguage(t),t.addEvents(),t.show()},Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex=e,this.skin_window&&(this.skin_window.tabIndex=this._tabIndex)},enumerable:!0,configurable:!0}),t.prototype.onTabClick=function(e){this._tabIndex=e},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.group_bottom&&this.group_bottom.addEventListener(egret.Event.RESIZE,this.onBottomResize,this),this.onStageResize()},t.prototype.onStageResize=function(){var e=this;e.group_bottom&&e.onBottomResize(),e.group_center&&e.onCenterResize(),e.group_scaleX&&e.onGroupScaleX()},t.prototype.onGroupScaleX=function(){var e=this;e.group_scaleX&&(e.group_scaleX.x=0,e.group_scaleX.y=0,e.group_scaleX.width=StageUtils.getInstance.stage.stageWidth,e.group_scaleX.height=StageUtils.getInstance.stage.stageHeight)},t.prototype.onBottomResize=function(){var e=this;e.group_bottom&&(e._bottom=e.group_bottom.bottom||e._bottom,e.group_bottom.bottom=void 0,e.group_bottom.y=StageUtils.getInstance.stage.stageHeight-e._bottom-e.group_bottom.height+e.startY)},t.prototype.onCenterResize=function(){var e=this;this.group_center&&(e._centerTop=e.group_center.top||e._centerTop,e.group_center.top=void 0,e._centerBottom=e.group_center.bottom||e._centerBottom,e.group_center.bottom=void 0,e.group_center.y=e._centerTop,e.group_center.height=StageUtils.getInstance.stage.stageHeight-e._centerBottom-e._centerTop+e.startY)},t.prototype.loadRes=function(){var e=this,t=e.getNeedResGroup().concat(e.getNeedResItemList());null!=t&&t.length>0?ResUtil.getInstance.loadGroupWithPro(t,e.loadComplete,null,e):e.loadComplete()},t.prototype.loadComplete=function(){var e=this;e.initSkinView()},t.prototype.hasData=function(e){for(var t=this,n=t.getDatas(),r=0;r<n.length;r++)if(n[r]==e)return!0;return!1},t.prototype.getDatas=function(){return null},t.prototype.onDataChanged=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.prototype.getNeedResGroup=function(){return this._needLoadResGroupList},t.prototype.getNeedResItemList=function(){return this._needLoadResItemList},t.prototype.getName=function(){return null},t.prototype.getBackName=function(){return null},t.prototype.show=function(){var e=this;e.showCreatAccountView()},t.prototype.update=function(e){e&&(this._data=e)},t.prototype.showToStage=function(){},t.prototype.showCreatAccountView=function(){var e=this;e.showToStage()},t.prototype.addEvents=function(){},t.prototype.removeEvents=function(){},t.prototype.close=function(){var e=this;ScenesManager.getInstance.currView=null,e.dispose()},t.prototype.hide=function(){},t.prototype.isNeedToRelease=function(){return!0},t.prototype.dispose=function(){var e=this;e.removeEvents(),e.data=null,0==e.isCache&&e.disposeRes(),e.group_bottom&&e.group_bottom.removeEventListener(egret.Event.RESIZE,e.onBottomResize,e),e.hide(),e.skin_window&&e.skin_window.dispose(),e.fullScreen&&ScenesManager.getInstance.ShowScene(),ScenesManager.getInstance.views.Remove(e.uiName),ScenesManager.getInstance.currView=null,DisplayUtils.removeFromParent(e)},t.prototype.disposeRes=function(){var e=this;for(e.isComplete=!1;e._needLoadResGroupList&&e._needLoadResGroupList.length>0;){var t=e._needLoadResGroupList.pop();RES.destroyRes(t)}for(;e._needLoadResItemList&&e._needLoadResItemList.length>0;){var n=e._needLoadResItemList.pop();RES.destroyRes(n)}},t}(eui.Component);e.BaseView=t,__reflect(t.prototype,"UI.BaseView")}(UI||(UI={}));var UI;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this,r=n;return r.type=UIType.Scene,n}return __extends(t,e),t}(e.BaseView);e.BaseScene=t,__reflect(t.prototype,"UI.BaseScene")}(UI||(UI={}));var LoginView=function(e){function t(){return e.call(this,SkinName.LoginViewSkin)||this}return __extends(t,e),t.prototype.addEvents=function(){e.prototype.addEvents.call(this);var t=this;t.beginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.beginBtnHandler,t)},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.beginBtnHandler=function(){var e=this;e.close(),ScenesManager.getInstance.openView(UIUtil.createScene(ViewClassName.GameMainView),LayerManager.GAME_UI_LAYER,!0)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(UI.BaseScene);__reflect(LoginView.prototype,"LoginView");var BaseClass=function(){function e(){}return e.Instance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;if(!n._instance){var r=e.length;0==r?n._instance=new n:1==r?n._instance=new n(e[0]):2==r?n._instance=new n(e[0],e[1]):3==r?n._instance=new n(e[0],e[1],e[2]):4==r?n._instance=new n(e[0],e[1],e[2],e[3]):5==r&&(n._instance=new n(e[0],e[1],e[2],e[3],e[4]))}return n._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var TSDictionary=function(){function e(){this.keys=[],this.values=[],this._len=0}return e.prototype.Add=function(e,t){var n=this;n.keys.push(e),n.values.push(t),n._len++},e.prototype.Remove=function(e){var t=this,n=t.keys.indexOf(e,0);-1!=n&&(t.keys.splice(n,1),t.values.splice(n,1),t._len--)},e.prototype.TryGetValue=function(e){var t=this,n=t.keys.indexOf(e,0);return-1!=n?t.values[n]:null},e.prototype.TryGetKey=function(e){var t=this,n=t.values.indexOf(e,0);return-1!=n?t.keys[n]:null},e.prototype.TryGetListByCondition=function(e){for(var t=this,n=[],r=0,o=t.values;r<o.length;r++){var i=o[r];e(i)&&(n[n.length]=i)}return n},e.prototype.TryGetAnyByCondition=function(e){for(var t=this,n={},r=0,o=t.keys;r<o.length;r++){var i=o[r],a=t.keys.indexOf(i,0);e(t.values[a])&&(n[i]=t.values[a])}return n},e.prototype.TryGetKeyListByCondition=function(e){for(var t=this,n=[],r=0;r<t.keys.length;r++)e(t.keys[r])&&(n[n.length]=t.values[r]);return n},e.prototype.ContainsKey=function(e){for(var t=this,n=t.keys,r=0;r<n.length;++r)if(n[r]==e)return!0;return!1},e.prototype.SetDicValue=function(e,t){var n=this.keys.indexOf(e,0);return-1!=n?(this.keys[n]=e,this.values[n]=t,!0):(this.Add(e,t),!0)},e.prototype.SortByKey=function(){for(var e=this,t=e.keys.length-1;t>0;t--)for(var n=0;t>n;n++)if(Number(e.keys[n])>Number(e.keys[n+1])){var r=e.keys[n],o=e.values[n];e.keys[n]=e.keys[n+1],e.values[n]=e.values[n+1],e.keys[n+1]=r,e.values[n+1]=o}return!0},e.prototype.GetLenght=function(){return this._len},e.prototype.getValueByIndex=function(e){var t=this;if(!(0>e||e>=t._len)){var n=t.values[e];return n}},e.prototype.getKeyByIndex=function(e){var t=this;if(!(0>e||e>=t._len)){var n=t.keys[e];return n}},e.prototype.getValues=function(){return this.values},e.prototype.getkeys=function(){return this.keys},e.prototype.clear=function(){for(var e=this;e.keys.length>0;)e.keys.pop();for(;e.values.length>0;){var t=e.values.pop();t=null}e.keys.length=0,e.values.length=0,e._len=0},e}();__reflect(TSDictionary.prototype,"TSDictionary");var GameMainView=function(e){function t(){var t=e.call(this,SkinName.GameMainViewSkin)||this;return t.shapeList=[],t}return __extends(t,e),t.prototype.addEvents=function(){e.prototype.addEvents.call(this)},t.prototype.show=function(){e.prototype.show.call(this);var t=this,n=new TetrisItem;t.addChild(n)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(UI.BaseScene);__reflect(GameMainView.prototype,"GameMainView");var PlayerInfoManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"getInstance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.setup=function(){},t}(egret.EventDispatcher);__reflect(PlayerInfoManager.prototype,"PlayerInfoManager");var App=function(){function e(){}return Object.defineProperty(e,"TimerManager",{get:function(){return TimerManager.Instance()},enumerable:!0,configurable:!0}),e}();__reflect(App.prototype,"App");var GameConfig=function(){function e(){}return e.systemType=function(){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void LogManager.logFormat("未知系统类型")},e.platformType=function(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"},e.IsIos=function(){return"wx"==ext.getPlatform()&&-1!=String(e.systemInfo.model).indexOf("iPhone")},e.IsIphoneX=function(){return"wx"==ext.getPlatform()&&(-1!=String(e.systemInfo.model).indexOf("iPhone X")||-1!=String(e.systemInfo.model).indexOf("LLD-AL20")||-1!=String(e.systemInfo.model).indexOf("iPhone11"))},e.IsWX=function(){return"wx"==ext.getPlatform()},e.Language="CN",e.Version="20180414",e.IsOnLine=navigator.onLine,e.IsDebug=!1,e}();__reflect(GameConfig.prototype,"GameConfig");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?r(o):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BoneAnimation=function(e){function t(n){var r=e.call(this)||this;return r._isLoadComplete=!1,r._isInPool=!1,r._timeScale=1,r._currentAnimationName="",r._isPauseAtLastFrame=!1,r._removeAtLastFrame=!0,r._removeWhenRemoveFromStage=!0,r._playTimes=1,r._detectFrameEvent=!1,r._direction=1,r._startframeIndex=0,r._param="",r._skeName=n,r._skeName==t.traceID&&LogManager.logFormat("LoadBone constructor {0}",t.traceID),r}return __extends(t,e),t.prototype.play=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null),this._skeName==t.traceID&&LogManager.logFormat("LoadBone play {0}",t.traceID),this._complete=e,this._completeTarget=n,this.addEventListener(t.LOAD_COMPLETE,this.playNow,this),this._isLoadComplete&&this.playNow()},t.prototype.stop=function(e){null!=this.armature&&this.armature.animation.stop(e)},t.prototype.playNow=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone playNow {0}",t.traceID),this._isInPool&&LogManager.warningFormat("{0} current is in pool must be not play",this._skeName),this.removeEventListener(t.LOAD_COMPLETE,this.playNow,this),""==this._currentAnimationName&&(this._currentAnimationName=this.getRandomAnimationName()),dragonBones.WorldClock.clock.add(this.armature),this.armature.animation.gotoAndPlayByFrame(this._currentAnimationName,this._startframeIndex,this.playTimes),this.armature.eventDispatcher.addDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.playComplete,this),this.detectFrameEvent&&this.armature.eventDispatcher.addDBEventListener(dragonBones.EventObject.FRAME_EVENT,this.onFrameEventFired,this),this.removeWhenRemoveFromStage&&this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onBoneRemove,this)},t.prototype.load=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone load start {0}",t.traceID),ResUtil.getInstance.loadGroup(this._skeName,this.loadComplete,this,ResUtil.PRIORITY_H)},t.prototype.onFrameEventFired=function(e){this.dispatchEvent(new egret.Event(t.FRAME_EVENT,!0,!0,e.data))},t.prototype.loadComplete=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone loadComplete start {0}",t.traceID),this.armature=BoneManager.Instance.getArmature(this._skeName),this._isLoadComplete=!0,this.addChild(this.armature.display),this.initBone(),this.dispatchEvent(new egret.Event(t.LOAD_COMPLETE,!0,!0,this)),this._skeName==t.traceID&&LogManager.logFormat("LoadBone loadComplete createComplete {0}",t.traceID)},t.prototype.resetForPool=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone resetForPool {0}",t.traceID),this._isInPool=!0,this._isLoadComplete&&(this.armature.animation.stop(),this.armature.animation.timeScale=this._timeScale=1,this.armature.display.scaleX=this._direction=1,dragonBones.WorldClock.clock.remove(this.armature),DisplayUtils.resetDisplay(this),DisplayUtils.resetDisplay(this.armature.display))},t.prototype.playComplete=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone playComplete {0}",t.traceID),this.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.playComplete,this),this.isPauseAtLastFrame&&this.armature.animation.stop(this._currentAnimationName),this.removeAtLastFrame&&this.onBoneRemove(),null!=this._complete&&null!=this._completeTarget&&this._complete.call(this._completeTarget),this.dispatchEvent(new egret.Event(t.LOOP_COMPLETE,!0,!0,this))},t.prototype.onBoneRemove=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone onBoneRemove {0}",t.traceID),this.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.playComplete,this),this.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.FRAME_EVENT,this.onFrameEventFired,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onBoneRemove,this),ResourcePool.getIntance().hasItem(this,ResourcePool.SKE)||ResourcePool.getIntance().push(this,ResourcePool.SKE)},t.prototype.initBone=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone initBone {0}",t.traceID),this._isInPool=!1,this._isLoadComplete&&(this.armature.animation.timeScale=this._timeScale),this._isLoadComplete&&(this.armature.display.scaleX=this._direction),this._positionString&&(this.position=this.position)},t.prototype.gotoAndStopFrame=function(e){void 0===e&&(e=""),this._skeName==t.traceID&&LogManager.logFormat("LoadBone playNow {0}",t.traceID),this._currentAnimationName=e,""==this._currentAnimationName&&(this._currentAnimationName=this.getRandomAnimationName()),this.armature.animation.gotoAndStopByFrame(this._currentAnimationName)},t.prototype.gotoAndStopFrameExcept=function(e){this._skeName==t.traceID&&LogManager.logFormat("LoadBone playNow {0}",t.traceID),this._currentAnimationName=this.getRandomAnimationNameExcept(e),this.armature.animation.gotoAndStopByFrame(this._currentAnimationName)},Object.defineProperty(t.prototype,"skeName",{get:function(){return this._skeName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoadComplete",{get:function(){return this._isLoadComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(e){this._timeScale=e,this._isLoadComplete&&(this.armature.animation.timeScale=this._timeScale)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAnimationName",{get:function(){return this._currentAnimationName},set:function(e){this._currentAnimationName=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playTimes",{get:function(){return this._playTimes},set:function(e){this._playTimes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"detectFrameEvent",{get:function(){return this._detectFrameEvent},set:function(e){this._detectFrameEvent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removeAtLastFrame",{get:function(){return this._removeAtLastFrame},set:function(e){this._removeAtLastFrame=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPauseAtLastFrame",{get:function(){return this._isPauseAtLastFrame},set:function(e){this._isPauseAtLastFrame=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removeWhenRemoveFromStage",{get:function(){return this._removeWhenRemoveFromStage},set:function(e){this._removeWhenRemoveFromStage=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this._isLoadComplete&&(this.armature.display.scaleX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionString",{get:function(){return this._positionString},set:function(e){if(""!=e){var t=e.split("|");if(2==t.length){this._positionString=e;var n=new egret.Point(Number(t[0]),Number(t[1]));this.position=n}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this.x=this._position.x,this.y=this._position.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startframeIndex",{get:function(){return this._startframeIndex},set:function(e){this._startframeIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"param",{get:function(){return this._param},set:function(e){this._param=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"param1",{get:function(){return this._param1},set:function(e){this._param1=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allAnimationNames",{get:function(){return this.armature.animation.animationNames},enumerable:!0,configurable:!0}),t.prototype.hasAnimation=function(e){return null==this.armature?!1:this.armature.animation.hasAnimation(e)},t.prototype.getFrameCountByName=function(e){var t=this.armature.animation.animations[e];return t.frameCount},t.prototype.getRandomAnimationName=function(){return 1==this.allAnimationNames.length?this.allAnimationNames[0]:ObjectUtils.getRandomItem(this.allAnimationNames)},t.prototype.getRandomAnimationNameExcept=function(e){if(1==this.allAnimationNames.length)return this.allAnimationNames[0];var t=this.allAnimationNames.slice(1);return ObjectUtils.getRandomItem(t)},t.prototype.dispose=function(){this._skeName==t.traceID&&LogManager.logFormat("LoadBone dispose {0}",t.traceID),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onBoneRemove,this),this.armature&&(this.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.playComplete,this),this.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.FRAME_EVENT,this.onFrameEventFired,this),dragonBones.WorldClock.clock.remove(this.armature),this.armature.dispose(),this.armature=null),this._skeName=null,this._complete=null,this._completeTarget=null,this._position=null,this._currentAnimationName=null,this._isPauseAtLastFrame=null,this._removeAtLastFrame=null},t.LOAD_COMPLETE="boneLoadComplete",t.LOOP_COMPLETE="boneLoopComplete",t.FRAME_EVENT="frameEvent",t.traceID="tx_01",t}(egret.Sprite);__reflect(BoneAnimation.prototype,"BoneAnimation");var BoneConfig=function(){function e(){}return e.copyValueFromTemplate=function(e,t){var n=GlobleData.getDataByFilter(GlobleData.BoneAnimationVO,"skename",t);if(n.length>0){var r=n[0];ObjectUtils.copyValue(e,r)}},e.SKE_END_TAG="_ske_json",e.TEXTUREDATA_END_TAG="_tex_json",e.TEXTURE_END_TAG="_tex_png",e}();__reflect(BoneConfig.prototype,"BoneConfig");var BoneManager=function(){function e(){this._factory=dragonBones.EgretFactory.factory}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.test_showBone=function(e){var t=ResourcePool.getIntance().pop(e,ResourcePool.SKE);DisplayUtils.addToStageCenter(t,!0),t.playTimes=0,t.removeAtLastFrame=!1,t.play()},e.prototype.start=function(){App.TimerManager.doFrame(0,0,this.onUpdate,this)},e.prototype.stop=function(){App.TimerManager.remove(this.onUpdate,this)},e.prototype.onUpdate=function(e){dragonBones.WorldClock.clock.advanceTime(-1)},e.prototype.getArmature=function(e){if(null==this._factory.getDragonBonesData(e)){var t=this.getSkeData(e),n=this.getTextureData(e),r=this.getTexture(e);this._factory.parseDragonBonesData(t),this._factory.parseTextureAtlasData(n,r)}var o=this._factory.buildArmature(e);return o},e.prototype.getSkeData=function(e){return RES.getRes(e+BoneConfig.SKE_END_TAG)},e.prototype.getTextureData=function(e){return RES.getRes(e+BoneConfig.TEXTUREDATA_END_TAG)},e.prototype.getTexture=function(e){return RES.getRes(e+BoneConfig.TEXTURE_END_TAG)},e}();__reflect(BoneManager.prototype,"BoneManager");var Command=function(){function e(){}return e.prototype.Command=function(){this._isFinished=!1},e.prototype.connect=function(e){return!1},e.prototype.canReplace=function(e){return!1},Object.defineProperty(e.prototype,"isFinished",{get:function(){return this._isFinished},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){this._isPrepare||(this._isPrepare=!0)},e.prototype.execute=function(){this.executeAtOnce(),this._isFinished=!0},e.prototype.executeAtOnce=function(){this.prepare(),this._isFinished=!0},e.prototype.cancel=function(){},e}();__reflect(Command.prototype,"Command");var CommandQueue=function(){function e(){this._queue=new Array}return e.prototype.add=function(e){for(var t=0;t<this._queue.length;t++){var n=this._queue[t];if(n.connect(e))return;if(n.canReplace(e))return e.prepare(),void(this._queue[t]=e)}this._queue.push(e),1==this._queue.length&&e.prepare()},e.prototype.execute=function(){if(this._queue.length>0){var e=this._queue[0];e.isFinished?(this._queue.shift(),this._queue.length>0&&this._queue[0].prepare()):e.execute()}},e.prototype.traceAllRemainAction=function(){for(var e=0;e<this._queue.length;e++){var t=egret.getQualifiedClassName(this._queue[e]);LogManager.logFormat("【Command】"+t)}},Object.defineProperty(e.prototype,"actionCount",{get:function(){return this._queue.length},enumerable:!0,configurable:!0}),e.prototype.executeAtOnce=function(){for(var e=0;e<this._queue.length;e++)this._queue[e].executeAtOnce()},e.prototype.clear=function(){for(var e=0;e<this._queue.length;e++)this._queue[e].cancel();this._queue=[]},e}();__reflect(CommandQueue.prototype,"CommandQueue");var EventsManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"getInstance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);__reflect(EventsManager.prototype,"EventsManager");var GameEnterManager=function(){function e(){}return e.prototype.setup=function(){PlayerInfoManager.getInstance.setup(),BoneManager.Instance.start()},Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e}();__reflect(GameEnterManager.prototype,"GameEnterManager");var GlobleData=function(e){function t(){var t=e.call(this)||this;return t._hasParasComplete=!1,t._totalStepCsvList=new TSDictionary,t._needParseCount=0,t._currParseCount=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"hasParasComplete",{get:function(){return this._hasParasComplete},enumerable:!0,configurable:!0}),t.prototype.setup=function(e){var t=this;t._callback=e,t.initModel(),t.initStep()},t.prototype.initModel=function(){var e=this;e._totalStepCsvList.Add(t.ServerConfigVO,ServerConfigVO)},t.prototype.initStep=function(){var e=this;e._needParseCount=e._totalStepCsvList.GetLenght(),RES.getResAsync("json_zip",this.onloadDataComplete,e),LogManager.logFormat("dataFile is json_zip")},t.prototype.onloadDataComplete=function(e,t){var n=this;n._csvZipData=new JSZip(e),LogManager.logFormat("onloadDataComplete is json_zip:"+t),App.TimerManager.doFrame(0,0,n.onEnterFrameLoader,n)},t.prototype.onEnterFrameLoader=function(){var e=this;e._currParseCount>=e._needParseCount?(App.TimerManager.remove(e.onEnterFrameLoader,e),this._hasParasComplete=!0,GameEnterManager.Instance.setup(),e._callback&&e._callback()):(e.getCsvFile(),e.getCsvFile())},t.prototype.getCsvFile=function(){var e=this;if(e._currParseCount<e._needParseCount){var t=e._totalStepCsvList.getKeyByIndex(e._currParseCount);t=t.replace("_",".");var n=e._csvZipData.file(t);null==n&&LogManager.errorFormat("can't get key from key :"+t);var r=e._csvZipData.file(t).asText();e.starSingleParse(r)}},t.prototype.starSingleParse=function(e){var n=this,r=n._totalStepCsvList.getKeyByIndex(n._currParseCount),o=n._totalStepCsvList.getValueByIndex(n._currParseCount),i=CSVParser.ParseJsonData(o,e);t.AllCacheData.Add(r,i),n._currParseCount++},Object.defineProperty(t,"getInstance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.getData=function(e,n){var r=t.AllCacheData.TryGetValue(e);return r?r.TryGetValue(n):[]},t.getDataByFilter=function(e,n,r){var o=t.AllCacheData.TryGetValue(e);if(!o)return[];var i=o.TryGetListByCondition(function(e){return e[n]==r});return i},t.getAllValue=function(e){var n=t.AllCacheData.TryGetValue(e);return n?n.getValues():[]},t.getDataByCondition=function(e,n){var r=t.AllCacheData.TryGetValue(e);if(!r)return[];var o=r.TryGetListByCondition(n);return o},t.AllCacheData=new TSDictionary,t.ServerConfigVO="ServerConfig_json",t.SoundVO="Sound_json",t.BoneAnimationVO="BoneAnimation_json",t}(egret.DisplayObject);__reflect(GlobleData.prototype,"GlobleData");var LanguageManager=function(){function e(){this._languageMap=new TSDictionary,this._reg=new RegExp("\\{(\\d+)\\}")}return Object.defineProperty(e,"getInstance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setup=function(e){var t=this,n=String(e).split("\r\n");if(n.length)for(var r=0;r<n.length;r++){var o=n[r];if("#"!=o&&""!=o){var i=o.split(":");t._languageMap.ContainsKey(i[0])&&t._languageMap.Remove(i[0]),i.length<=2?t._languageMap.Add(i[0],i[1]):t._languageMap.Add(i[0],i.slice(1).join(""))}}},e.prototype.getLanguageMapData=function(){var e=this;return e._languageMap.getValues()},e.prototype.getLanguageById=function(e){var t=this;return t._languageMap.TryGetValue(e)},e.prototype.setModuleLanguage=function(t){var n=this;t&&(!t||t.numChildren)&&e.isOpenLanguage&&n.SearchAndModifyNodeLanguage(t)},e.prototype.SearchAndModifyNodeLanguage=function(t){for(var n=0;n<t.numChildren;n++){var r=t.getChildAt(n);if(r instanceof egret.DisplayObjectContainer&&this.SearchAndModifyNodeLanguage(r),r instanceof eui.Label){if(""!=r.name){var o=r.name.split("@")[1];o&&(r.text=e.getInstance.getLanguageById(o))}}else if(r instanceof eui.EditableText){if(""!=r.name){var o=r.name.split("@")[1];o&&(r.prompt=e.getInstance.getLanguageById(o))}}else if(r instanceof eui.Button&&""!=r.name){var o=r.name.split("@")[1];o&&(r.label=e.getInstance.getLanguageById(o))}}},e.prototype.getLanguageText=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this;return r.getTranslationWithArray(e,t)},e.prototype.getTranslationWithArray=function(e,t){var n=this;return n._languageMap.ContainsKey(e)?n.replaceStr(n._languageMap.TryGetValue(e),t):void 0},e.prototype.languageReplace=function(e,t){var n=this;return n.replaceStr(e,t)},e.prototype.replaceStr=function(e,t){var n=this;if(t&&t.length>0)for(var r=n._reg.exec(e);r&&t.length>0;){var o=Number(r[1]),i=String(t[o]);if(o>=0&&o<t.length){var a=i.indexOf("$");a>-1&&(i=i.slice(0,a)+"$"+i.slice(a)),e=e.replace(n._reg,i)}else e=e.replace(n._reg,"{}");r=n._reg.exec(e)}return e},e.isOpenLanguage=!0,e}();__reflect(LanguageManager.prototype,"LanguageManager");var LoginManager=function(){function e(){}return e.prototype.setup=function(){},Object.defineProperty(e,"getInstance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(LoginManager.prototype,"LoginManager");var LogManager=function(){function e(){}return e.logFormat=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.buildFormatString(t,n);egret.log(o)},e.warningFormat=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.buildFormatString(t,n);egret.warn(o)},e.errorFormat=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.buildFormatString(t,n);egret.error(o)},e.buildFormatString=function(e,t){var n;return"number"==typeof e?n=e.toString():"string"==typeof e?n=e:"object"==typeof e&&(n=JSON.stringify(e)),t.forEach(function(e,t){n=n.replace("{"+t+"}",e)}),n+=" -- [Time:"+egret.getTimer()+"]"},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t,n){e=e.replace("{"+n+"}",t)}),e},e}();__reflect(LogManager.prototype,"LogManager");var MessageManger=function(){function e(){this._textDisplayDic=new TSDictionary,this._maxNum=5}return Object.defineProperty(e,"getInstance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype._creatOneTextDisplay=function(){var e=new eui.Label;return e.textColor=16777215,e.stroke=3,e.strokeColor=4199171,e.size=40,e.fontFamily="黑体",e.horizontalCenter=0,e.verticalCenter=0,e.touchEnabled=!1,e.width=StageUtils.getInstance.stage.stageWidth,e.wordWrap=!0,e.textAlign="center",e.y=StageUtils.getInstance.stage.stageHeight/2,e},e.prototype.showText=function(e){var t=this,n=this.getOne(e);n.text=e;var r={display:n,isplaying:!0};this._textDisplayDic.Add(e,r),LayerManager.getInstance.addToLayer(n,LayerManager.GAME_POP_LAYER),n.alpha=1,egret.Tween.get(n).to({verticalCenter:-100},3e3).call(function(){egret.Tween.removeTweens(n),n.parent&&n.parent.removeChild(n),n.alpha=1,n.verticalCenter=0,t.onAnimationComplete(e)})},e.prototype.startAnimation=function(e,t){var n=this;LayerManager.getInstance.addToLayer(t,LayerManager.GAME_POP_LAYER),t.alpha=1,egret.Tween.get(t).to({verticalCenter:-100},3e3).call(function(){egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t),t.alpha=1,t.verticalCenter=0,delete t.$children,n.onAnimationComplete(e)
})},e.prototype.onAnimationComplete=function(e){var t=this._textDisplayDic.TryGetValue(e);t&&(t.isplaying=!1,this._textDisplayDic.Remove(e))},e.prototype.removeTips=function(){for(var e=this,t=0;t<e._textDisplayDic.GetLenght();t++){var n=e._textDisplayDic.getValueByIndex(t);n.display.parent&&n.display.parent.removeChild(n.display),n.display.alpha=1,n.display.verticalCenter=0,delete n.display.$children}e._textDisplayDic.clear()},e.prototype.getOne=function(e){return this._creatOneTextDisplay()},e}();__reflect(MessageManger.prototype,"MessageManger");var PathManager=function(){function e(){this._resourceUrl=""}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceUrl",{get:function(){var e=this;return e._resourceUrl},set:function(e){var t=this;t._resourceUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ThemePath",{get:function(){var e=this;return e._resourceUrl+"default.thm.json"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MapBackgoundPath",{get:function(){var e=this;return e._resourceUrl+"Common/map/{0}.jpg"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EquipPath",{get:function(){var e=this;return e._resourceUrl+"Common/equip/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MercenaryPath",{get:function(){var e=this;return e._resourceUrl+"Common/mercenarys/mercenary/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SevenDayPath",{get:function(){var e=this;return e._resourceUrl+"Common/sevenDay/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MercenaryLargePath",{get:function(){var e=this;return e._resourceUrl+"Common/mercenarys/drawing/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Mercenary_Small_Path",{get:function(){var e=this;return e._resourceUrl+"Common/mercenarys/mercenary_small/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HeroSkill_Path",{get:function(){var e=this;return e._resourceUrl+"Common/skill/heroSk_{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Hero_Path",{get:function(){var e=this;return e._resourceUrl+"Common/heroes/big/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HeroGoldBody_Path",{get:function(){var e=this;return e._resourceUrl+"Common/heroes/gb/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HeroSkin_Path",{get:function(){var e=this;return e._resourceUrl+"Common/heroes/skin/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HeroSmallSkin_Path",{get:function(){var e=this;return e._resourceUrl+"Common/heroes/smallSkin/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Ancient_Path",{get:function(){var e=this;return e._resourceUrl+"Common/ancient/ancientIcon_{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SkillPath",{get:function(){var e=this;return e._resourceUrl+"Common/skill/heroSk_{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ItemPath",{get:function(){var e=this;return e._resourceUrl+"Common/item/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SoundPath",{get:function(){var e=this;return e._resourceUrl+"Common/sound/"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Shop",{get:function(){var e=this;return e._resourceUrl+"Common/shop/{0}.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Share",{get:function(){var e=this;return e._resourceUrl+"Common/share/{0}.jpg"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language_path",{get:function(){var e=this;return e._resourceUrl+"/config/language.txt?v="+Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ConfigUrls",{get:function(){var e=this;return[e._resourceUrl+"default.res.json?v="+Math.random(),e._resourceUrl+"config/game_com.res.json?v="+Math.random(),e._resourceUrl+"config/game_ui.res.json?v="+Math.random()]},enumerable:!0,configurable:!0}),e}();__reflect(PathManager.prototype,"PathManager");var SdkManager=function(){function e(){}return Object.defineProperty(e,"getInstance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.paySdk=function(e){},e.prototype.payFail=function(){MessageManger.getInstance.showText(LanguageManager.getInstance.getLanguageText("models.sdkManager.payFail"))},e.prototype.totalShare=function(e,t,n){void 0===n&&(n=null)},e.prototype.getFriendList=function(e,t){},e.prototype.createRank=function(){},e.prototype.getSystemInfo=function(){},e.prototype.setUserCloudStorage=function(e){},e.prototype.ShowVideoAd=function(e,t){},e.prototype.addShortcut=function(e){},e}();__reflect(SdkManager.prototype,"SdkManager");var SoundManager=function(){function e(){}return e.playEffect=function(e){var t=this;t.gameVoice&&t.loaderEffectSound(e)},e.playBattleEffect=function(e){var t=this;t.battleSound&&t.loaderEffectSound(e)},e.loaderEffectSound=function(t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){return n=this,0==n.ALL_SOUND?[2]:(r=GlobleData.getData(GlobleData.SoundVO,t),null==r?[2]:(null==RES.getRes(PathManager.Instance.SoundPath+r.file)?ResUtil.getInstance.loadAsyncSound(r.file,function(){e.createEffectSound(r)}):e.createEffectSound(r),[2]))})})},e.createEffectSound=function(e){var t=RES.getRes(PathManager.Instance.SoundPath+e.file);if(t){t.type=egret.Sound.EFFECT;var n=t.play(0,e.loop);n.addEventListener(egret.Event.SOUND_COMPLETE,function(){},this),n.volume=e.volume}},e.playBgSound=function(e,t){void 0===t&&(t=!0);var n=this;n.loaderBGSound(e,t)},e.loaderBGSound=function(t,n){return void 0===n&&(n=!0),__awaiter(this,void 0,void 0,function(){var r,o;return __generator(this,function(i){return r=this,o=GlobleData.getData(GlobleData.SoundVO,t),null==o?[2]:(null==RES.getRes(PathManager.Instance.SoundPath+o.file)?ResUtil.getInstance.loadAsyncSound(o.file,function(){e.createBgSound(o,n)}):e.createBgSound(o,n),[2])})})},e.createBgSound=function(t,n){void 0===n&&(n=!0);var r=this;r.sdbg=RES.getRes(PathManager.Instance.SoundPath+t.file),r.sdbg&&(r.sdbg.type=egret.Sound.MUSIC,e.stopBgSound(),r.soundChannel=r.sdbg.play(0,n?0:1),r.soundChannel.volume=t.volume)},e.stopBgSound=function(){var e=this;if(e.soundChannel){var t=e.soundChannel;t.stop(),e.soundChannel=null}},e.battleSound=!0,e.gameVoice=!0,e.ALL_SOUND=!0,e}();__reflect(SoundManager.prototype,"SoundManager");var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._handlers=new Array,t._delHandlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._count=0,t._timeScale=1,egret.Ticker.getInstance().register(t.onEnterFrame,t),t}return __extends(t,e),t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0;e<this._count;e++){var t=this._handlers[e],n=t.userFrame?this._currFrame:this._currTime;n>=t.exeTime&&(t.method.call(t.methodObj,(this._currTime-t.dealTime)*this._timeScale),t.dealTime=this._currTime,t.exeTime+=t.delay,t.repeat||(t.repeatCount>1?t.repeatCount--:(t.complateMethod&&t.complateMethod.apply(t.complateMethodObj),this._delHandlers.push(t))))}for(;this._delHandlers.length;){var t=this._delHandlers.pop();this.remove(t.method,t.methodObj)}},t.prototype.create=function(e,t,n,r,o,i,a){if(!(0>t||0>n||null==r)){this.remove(r,o);var s=ObjectPool.pop("TimerHandler",TimerHandler);s.userFrame=e,s.repeat=0==n,s.repeatCount=n,s.delay=t,s.method=r,s.methodObj=o,s.complateMethod=i,s.complateMethodObj=a,s.exeTime=t+(e?this._currFrame:this._currTime),s.dealTime=this._currTime,this._handlers.push(s),this._count++}},t.prototype.doTimer=function(e,t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!1,e,t,n,r,o,i)},t.prototype.doFrame=function(e,t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!0,e,t,n,r,o,i)},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.remove=function(e,t){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==e&&r.methodObj==t){this._handlers.splice(n,1),ObjectPool.push(r),this._count--;break}}},t.prototype.removeAll=function(e){for(var t=0;t<this._count;t++){var n=this._handlers[t];n.methodObj==e&&(this._handlers.splice(t,1),ObjectPool.push(n),this._count--,t--)}},t.prototype.isExists=function(e,t){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==e&&r.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},e}();__reflect(TimerHandler.prototype,"TimerHandler");var ByteSocket=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this)||this;r._m_PackageQueue=new Array;var o=r;return SocketConfig.DEBUG=n,o._readBuffer=new egret.ByteArray,o._headerTemp=new egret.ByteArray,o._encrypted=t,r}return __extends(t,e),t.prototype.setKey=function(e){var t=this;t.RECEIVE_KEY=new egret.ByteArray,t.SEND_KEY=new egret.ByteArray;for(var n=0;8>n;n++)t.RECEIVE_KEY.writeByte(e[n]),t.SEND_KEY.writeByte(e[n])},t.prototype.resetKey=function(){this.setKey(SocketConfig.KEY)},t.prototype.sendProtobuffer=function(e,t){var n=this;if(null!=t){var r=new egret.ByteArray(t);e.writeBytes(r,0,r.length)}n.send(e)},t.prototype.send=function(e){var t=this;if(t._socket&&t._socket.connected){if(e.pack(),t._encrypted){e.position=0,t.SEND_KEY.position=0;for(var n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=new egret.ByteArray,c=new egret.ByteArray,u=new egret.ByteArray,l=0;l<e.length;l++)if(l>0){i=l,a=l%8,e.position=i,t.SEND_KEY.position=a;var p=o;l>=8?(c.position>=8&&u.length>0&&(c.clear(),c=t.copyByteArray(u),u.clear()),c.position=a,r=c.readByte(),r=r+p^l,u.writeByte(r)):(r=t.SEND_KEY.readByte(),r=r+p^l,c.writeByte(r)),n=e.readByte(),n=(n^r)+p,o=n,s.writeByte(n)}else n=e.readByte(),r=t.SEND_KEY.readByte(),n^=r,o=n,s.writeByte(n),c.writeByte(r);var h=new egret.ByteArray;for(u.length>0&&(h=t.copyByteArray(u)),c.position=u.position,l=c.position;l<c.length;l++)h.writeByte(c.readByte());t.SEND_KEY.clear(),t.SEND_KEY=t.copyByteArray(h),h.clear(),c.clear(),u.clear(),t._socket.writeBytes(s,0,s.length)}else e.position=0,t._socket.writeBytes(e,0,e.length);t._socket.flush()}},t.prototype.connect=function(e,t){var n=this;null!=n._socket&&n.close(),n._socket=new egret.WebSocket,n._socket.type=egret.WebSocket.TYPE_BINARY,SocketConfig.IP=e,SocketConfig.PORT=t,n._readBuffer.position=0,n._readOffset=0,n._writeOffset=0,n._socket.addEventListener(egret.Event.CONNECT,n.onConnectHandler,n),n._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,n.onErrorHandler,n),n._socket.addEventListener(egret.Event.CLOSE,n.onCloseHandler,n),n._socket.connectByUrl(e+":"+t+"/weegame")},t.prototype.onErrorHandler=function(e){LogManager.logFormat("连接错误");var t=this,n=new egret.Event(SocketEvents.SOCKET_ERROR);t.dispatchEvent(n)},t.prototype.onCloseHandler=function(){LogManager.logFormat("连接关闭");var e=this,t=new egret.Event(SocketEvents.SOCKET_CLOSE);e.dispatchEvent(t)},t.prototype.onConnectHandler=function(){var e=this;LogManager.logFormat("连接socket成功"),SocketManager.getInstance.onConnectHandler(null),e._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,e.onReceiveMessageHandler,e)},t.prototype.onReceiveMessageHandler=function(){var e=this;if(!e._socket.connected)return void e.close();var t=new egret.ByteArray;e._socket.readBytes(t);var n=t.length;if(n>0){var r=t;e._readBuffer.writeBytes(r,0,n),e._writeOffset+=n,e._writeOffset>1&&(e._readOffset=0,n>=PackageIn.HEADER_SIZE&&e.readPackage())}},t.prototype.readPackage=function(){var e=this,t=e._writeOffset-e._readOffset,n=e.copyByteArray(e._readBuffer);n.position=0;do{var r=0;for(e._readBuffer.position=e._readOffset;e._readOffset+4<e._writeOffset;){if(e._headerTemp.clear(),e._headerTemp.writeByte(e._readBuffer.readByte()),e._headerTemp.writeByte(e._readBuffer.readByte()),e._headerTemp.writeByte(e._readBuffer.readByte()),e._headerTemp.writeByte(e._readBuffer.readByte()),e._encrypted&&(e._headerTemp=e.decrptBytes(e._headerTemp,4,e.copyByteArray(e.RECEIVE_KEY))),e._headerTemp.position=0,e._headerTemp.readShort()==PackageOut.HEADER){r=e._headerTemp.readUnsignedShort();break}e._readOffset++}if(t=e._writeOffset-e._readOffset,!(t>=r&&0!=r))break;var o=new egret.ByteArray;e._readBuffer.position=e._readOffset;var i=0;for(i=0;t>i;i++)o.writeByte(n.readByte());var a=new PackageIn;e._encrypted?a.loadE(o,r,e.RECEIVE_KEY):a.load(o,r),e._readOffset+=r,t=e._writeOffset-e._readOffset,e.handlePackage(a)}while(t>=PackageIn.HEADER_SIZE);e._readBuffer.position=0,t>0&&e._readBuffer.writeBytes(e._readBuffer,e._readOffset,t),e._readOffset=0,e._writeOffset=t},t.prototype.handlePackage=function(e){var t=this;e.checksum==e.calculateCheckSum()&&(e.position=PackageIn.HEADER_SIZE,t._m_PackageQueue.push(e),t.onGetSocketData())},t.prototype.decrptBytes=function(e,t,n){var r=this,o=0,i=new egret.ByteArray;e.position=0,n.position=0;var a,s,c,u,l,p=new egret.ByteArray,h=new egret.ByteArray;for(o=0;t>o;o++)o>0?(u=o%8,n.position=u,o>=8?(p.position>=8&&h.length>0&&(p.clear(),p=r.copyByteArray(h),h.clear()),p.position=u,c=p.readByte(),c=c+s^o):(c=n.readByte(),c=c+s^o,p.writeByte(c)),a=e.readByte(),l=a-s^c,i.writeByte(l),s=a):(a=e.readByte(),c=n.readByte(),l=a^c,i.writeByte(l),p.writeByte(c),s=a);return i},t.prototype.copyByteArray=function(e){var t=new egret.ByteArray;e.position=0;for(var n=0;n<e.length;n++)t.writeByte(e.readByte());return t},t.prototype.onGetSocketData=function(){var e=this;if(e._m_PackageQueue.length>0)for(var t=0;t<SocketConfig.HANDLER_MAX;){if(e._m_PackageQueue.length<=0)return;t++;var n=e._m_PackageQueue.shift();e.dispatchEventWith(SocketEvents.SOCKET_DATA,!1,n)}},t.prototype.close=function(){var e=this;e._socket.connected&&e._socket.close(),e._socket=null},Object.defineProperty(t.prototype,"connected",{get:function(){var e=this;return e._socket.connected},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);__reflect(ByteSocket.prototype,"ByteSocket");var SocketManager=function(e){function t(){var t=e.call(this)||this;return t._hasInitEvents=!1,t}return __extends(t,e),t.prototype.setup=function(e,t){var n=this;n._socket=new ByteSocket(!1),n._socket.connect(e,t),n._out=new GameSocketOut(n),n.initEvents()},t.prototype.reConnect=function(e,t){var n=this;n._socket.connect(e,t)},t.prototype.initEvents=function(){var e=this;e._hasInitEvents||(e.addEventListener(SocketEvents.SOCKET_CONNECT,e.onConnectHandler,e),e._socket.addEventListener(SocketEvents.SOCKET_ERROR,e.onErrorHandler,e),e._socket.addEventListener(SocketEvents.SOCKET_CLOSE,e.onSocketCloseHandler,e),e._socket.addEventListener(SocketEvents.SOCKET_DATA,e.onSocketDataHandler,e),e._hasInitEvents=!0)},t.prototype.removeEvents=function(){var e=this;e._hasInitEvents=!1,e.removeEventListener(SocketEvents.SOCKET_CONNECT,e.onConnectHandler,e),e._socket.removeEventListener(SocketEvents.SOCKET_ERROR,e.onErrorHandler,e),e._socket.removeEventListener(SocketEvents.SOCKET_CLOSE,e.onSocketCloseHandler,e),e._socket.removeEventListener(SocketEvents.SOCKET_DATA,e.onSocketDataHandler,e)},t.prototype.onConnectHandler=function(e){var t=this;LogManager.logFormat("连接服务器成功"),t.removeEventListener(SocketEvents.SOCKET_CONNECT,t.onConnectHandler,t),this.dispatchEventWith(SocketEvents.SOCKET_CONNECT)},t.prototype.onSocketDataHandler=function(e){var t=this,n=e.data;if(null!=n){var r=n.code,o=n.readBody();t.dispatchEventWith(SocketEvents.format(r),!1,o.bytes)}},t.prototype.onSocketCloseHandler=function(){LogManager.logFormat("服务器没有连接上"),t.getInstance.close()},t.prototype.onErrorHandler=function(e){t.getInstance.close()},t.prototype.close=function(){var e=this;null!=e._socket&&e._socket.close()},Object.defineProperty(t.prototype,"socket",{get:function(){var e=this;return e._socket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"out",{get:function(){var e=this;return e._out},enumerable:!0,configurable:!0}),Object.defineProperty(t,"getInstance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);__reflect(SocketManager.prototype,"SocketManager");var PackageInTypeVo=function(){function e(){}return e.LANDFALL=6,e.LOGIN_SUCCESS=17,e.HEARTBEAT=11,e.PLAYER_MESSAGE=30,e.ACHIEVEMENTS_INIT=200,e.ACHIEVEMENTS_UPDATE=201,e.BAG_INIT=250,e.BAG_UPDATE=251,e.HEROES_LIST_MSG=37,e.HEROES_SKILL_LIST_MSG=118,e.HERO_MSG=38,e.EQUIP_ALL=42,e.EQUIP_ITEM=41,e.ANCIENT_LIST_MSG=39,e.ANCIENT_MSG=43,e.ANCIENT_RECOVER=46,e.REFRESH_BUY=40,e.RISKDATAMSG=106,e.REBIRTHDATA_LIST=107,e.MERCENARY_ON_LIST=300,e.MERCENARY_OUT_LIST=305,e.MERCENARY_DATA_LIST_NEW=303,e.MERCENARY_DATA_MSG=301,e.MERCENARY_DEVOUR=302,e.REWARD_LIST=15,e.DOUBLE_REWARD_LIST=49,e.HEROS_REWARD=108,e.ERROR_CODE=14,e.MAIL_LIST=8,e.MAIL_INFO=9,e.MAIL_DELETE=16,e.SKILL_LIST=44,e.SKILL_INFO=45,e.SKILL_SINGLE_CLEAR=50,e.MISSIONID_NEW=47,e.SKILL_CD_CLEAR=48,e.QUERY_TIMELAPSE_LIST=600,e.REVIVE=109,e.REVIVE_COMPLETE=117,e.CYCLE_HEROSOUL=601,e.HERO_Skin_LIST=110,e.HERO_GOLD_LIST=112,e.OFF_LINE_REWARD=111,e.UPDATA_SINGLE_SKIN=113,e.DAY_CHARGE=650,e.ACTIVITY_REWARD_STATE=651,e.DAY_SHARE=751,e.CONSUME_GIFT_BAG=655,e.CONSUME_BOX_LIST=656,e.MASCOT=702,e.CHECK_MASCOT_REWARD=704,e.SIGN_MSG=701,e.FIRST_RECHARGE=652,e.LOTTERY_REWARDS=753,e.LOTTERY_STATE_MSG=752,e.ACTIVITY_OPEN_LIST=750,e.KEEP_LOTTERY_LIST=755,e.PRIVILEGE_CARD_INFO=653,e.WEAR_SKIN=116,e.GUIDE_COMPLETE_STEP=22,e.ACTIVITY_INVITE=114,e.DAY_PURCHASE=756,e.RANK_LIST=800,e.RANK_GET_REWARD=801,e.ACTIVITY_STATE=757,e.LOTTERY_RANDOM_COUNT=758,e.GOLD_BODY_REWARD_LIST=115,e.SEVEN_REWARD_INFO=759,e.ACCUMULATE_HEROSOUL=119,e.REVIVE_BY_SKILL=120,e.ACTIVE_SKILL=121,e.FRIEND_RANK_LIST=802,e.FRIEND_HELP_LIST=850,e.FRIEND_HELP_SINGLE=851,e.FRIEND_HELP_MSG=852,e.NOTABLE=55,e.LOTTERY_COUNT=602,e.INVITE_AWARD=122,e.CHECK_MOODY=760,e.COLLECTION=761,e.LOGIN_ERROR=25,e.TASK_INFO=900,e}();__reflect(PackageInTypeVo.prototype,"PackageInTypeVo");var PackageOutTypeVo=function(){function e(){}return e.LOGIN=1,e.HEARTBEAT=2,e.PHONE_MODEL=3,e.ACHIEVEMENTS_PRO=250,e.ACHIEVEMENTS_GET_REWARD=251,e.ACHIEVEMENTS_GET_ALL_REWARD=252,e.HERO_LEVELUP=9,e.HEROSKILL_LEVELUP=10,e.HEROSKILL_LEVELUP_TOTAL=12,e.EQUIP_LOTTERY=350,e.EQUIP_LEVEL=351,e.EQUIP_DECOMPOSE=352,e.EQUIP_WEAR=353,e.DEL_ANCIENT=302,e.REFRESH_BUY=300,e.BUY_ANCIENT=301,e.ANCIENT_LEVELUP=304,e.SETUP=13,e.MERCENARY_UP_AND_DOWN=400,e.MERCENARY_TASK=401,e.MERCENARY_GET_TASK=402,e.MERCENARY_RESURRENCTION=403,e.MERCENARY_DEVOUR=404,e.MERCENARY_REPLACE=405,e.SHOP_BUY=450,e.SHOP_BUY_TIME=451,e.SHOP_LOTTERY_EQUIP=452,e.SHOP_LOTTERY_MERCENARY=453,e.SHOP_LOTTERY_SKIN=454,e.MERCENARY_REWARD=402,e.BATTLE_COMPLETE=100,e.ADD_MONEY_FROM_BATTLE=101,e.MAIL_READ=501,e.MAIL_DELETE=503,e.MAIL_ALL_GET=502,e.MAIL_GET_REWARD=500,e.USE_SKILL=11,e.RESOLVE_EQUIP=354,e.CHECK_TIME=455,e.CYCLE_HEROSOUL=456,e.MERCENARY_DATA_UPDATE=406,e.OFF_LINE_REWARD=102,e.GET_DAY_CHARGE_REWARD=701,e.ACCUMULATED_CHARGE_REWARD=702,e.SIMULATION_CHARGE=703,e.GET_FIRST_CHARGE_REWARD=704,e.DAY_SHARE_REWARD=751,e.SHARE_MSG=750,e.GET_CONSUME_GIFT_BAG=700,e.GET_REWARD_ONLINE=651,e.SIGN_MSG=652,e.CANCEL_RED_POINT=459,e.LOTTERY_STATE=458,e.LOTTERY_POS=460,e.USE_PROP_ITEM=900,e.KEEP_LOTTERY=461,e.PRIVILEGE_DAY_REWARD=705,e.WEAR_SKIN=457,e.GUIDE_COMPLETE_STEP=600,e.INVITE_GET_REWARD=850,e.CHECK_INVITE_FRIENDS=851,e.INVITE_FRIENDS=852,e.DAT_PURCHASE=462,e.GET_RANK_REWARD=800,e.RANDOM_GIFT=901,e.ACTIVITY_STATE=656,e.ACHIEVEMENT_REQUEST=253,e.OPEN_GOLD_BOX=103,e.SHOW_ANIMATION_OR_DRAW=14,e.LOOK_AD=655,e.CHECK_MASCOT_REWARD=658,e.SEVEN_DAY_REWARD=657,e.SKIP_LOTTERY_ANIM=463,e.BUY_SKILL_CD=15,e.EQUIP_LOCK=355,e.CHAT_MSG=50,e.FREE_REVIVE=16,e.FRIEND_RANK_LIST=801,e.SERVER_FRIEND_RANK_LIST=802,e.NPC_BEGIN_WORK=950,e.FRIEND_END_WORK=951,e.FREE_AUTOCLICK=602,e.INVITE_AWARD=853,e.GET_OFF_LINE_REWARD=104,e.NEWBIE=601,e.MOODY_REWARD=659,e.COLLECTION=660,e.CONCERN=661,e.COLLECTION_COMPLETE=662,e.TASK_FINISH=1e3,e.HERO_SKILL_BUY_ALL=17,e}();__reflect(PackageOutTypeVo.prototype,"PackageOutTypeVo");var SocketConfig=function(){function e(){}return e.IP="",e.HANDLER_MAX=50,e.KEY=[174,191,86,120,171,205,239,241],e.HOST="",e}();__reflect(SocketConfig.prototype,"SocketConfig");var GameSocketOut=function(){function e(e){var t=this;t._socketMgr=e}return e}();__reflect(GameSocketOut.prototype,"GameSocketOut");var PackageIn=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),Object.defineProperty(t.prototype,"checksum",{get:function(){return this._checksum},set:function(e){this._checksum=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientId",{set:function(e){this._clientId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this._cmdID},set:function(e){this._cmdID=e},enumerable:!0,configurable:!0}),t.prototype.loadE=function(e,t,n){var r=this,o=0,i=new egret.ByteArray,a=new egret.ByteArray;for(e.position=0,o=0;t>o;o++)i.writeByte(e.readByte());i.position=0,n.position=0;var s,c,u,l,p,h=new egret.ByteArray,g=new egret.ByteArray;for(o=0;t>o;o++)o>0?(l=o%8,n.position=l,o>=8?(h.position>=8&&g.length>0&&(h.clear(),h=r.copyByteArray(g),g.clear()),h.position=l,u=h.readByte(),u=u+c^o,g.writeByte(u)):(u=n.readByte(),u=u+c^o,h.writeByte(u)),s=i.readByte(),p=s-c^u,a.writeByte(p),c=s):(s=i.readByte(),u=n.readByte(),p=s^u,a.writeByte(p),h.writeByte(u),c=s);var f=new egret.ByteArray;for(g.length>0&&(f=r.copyByteArray(g)),h.position=g.position,o=h.position;o<h.length;o++)f.writeByte(h.readByte());for(SocketManager.getInstance.socket.RECEIVE_KEY.clear(),SocketManager.getInstance.socket.RECEIVE_KEY=r.copyByteArray(f),f.clear(),h.clear(),g.clear(),a.position=0,r.position=0,o=0;t>o;o++)r.writeByte(a.readByte());r.readHeader()},t.prototype.load=function(e,t){var n=this;e.position=0;for(var r=0;t>r;r++)n.writeByte(e.readByte());n.readHeader()},t.prototype.readHeader=function(){var e=this;e.position=0,e.readShort(),e._length=e.readShort(),e._checksum=e.readShort(),e._cmdID=e.readShort()},t.prototype.readBody=function(){var e=this,n=e,r=(n.length-t.HEADER_SIZE,new egret.ByteArray);n.position=t.HEADER_SIZE;for(var o=t.HEADER_SIZE;o<n.length;o++)r.writeByte(n.readByte());return r},t.prototype.calculateCheckSum=function(){var e=this,t=119,n=6;for(e.position=6;n<e.length;){n++;var r=e.readByte(),o=255&r;t+=o}var i=32639&t;return i},t.prototype.copyByteArray=function(e){e.position=0;for(var t=new egret.ByteArray,n=0;n<e.length;n++)t.writeByte(e.readByte());return t},t.HEADER_SIZE=8,t}(egret.ByteArray);__reflect(PackageIn.prototype,"PackageIn");var PackageOut=function(e){function t(n){var r=e.call(this,n)||this,o=r;return o.writeShort(t.HEADER),o.writeShort(0),o.writeShort(0),o.writeShort(0),o._checksum=0,r}return __extends(t,e),t.prototype.init=function(e){var t=this;t._cmdID=e,t.position=6,t.writeShort(t._cmdID)},t.prototype.pack=function(){var e=this;e._checksum=e.calculateCheckSum();var t=new egret.ByteArray;t.writeShort(e.length),t.writeShort(e._checksum),e.position=2,t.position=0,e.writeByte(t.readByte()),e.writeByte(t.readByte()),e.writeByte(t.readByte()),e.writeByte(t.readByte())},Object.defineProperty(t.prototype,"cmdID",{get:function(){return this._cmdID},enumerable:!0,configurable:!0}),t.prototype.calculateCheckSum=function(){var e=this,t=119,n=6;for(e.position=6;n<e.length;){n++;var r=e.readByte(),o=255&r;t+=o}return 32639&t},t.HEADER=29099,t}(egret.ByteArray);__reflect(PackageOut.prototype,"PackageOut");var SocketEventDispatcher=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"getInstance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);__reflect(SocketEventDispatcher.prototype,"SocketEventDispatcher");var SocketEvents=function(e){function t(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),e.call(this,t,n,r)||this}return __extends(t,e),Object.defineProperty(t.prototype,"pkg",{get:function(){var e=this;return e._pkg},enumerable:!0,configurable:!0}),t.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0;r<e.length;r++)n.push(e[r].toString(16));return n.join("+")},t.DATA="data",t.SOCKET_CONNECT="socketConnect",t.SOCKET_OPEN="socket_open",t.SOCKET_ERROR="socket_error",t.SOCKET_CLOSE="SOCKET_close",t.SOCKET_DATA="socket_data",t.SOCKET_CONNECT_STOP="socket_connect_stop",t.SOCKET_RECONNECT_SUCCESS="socket_reconnect_success",t}(egret.Event);__reflect(SocketEvents.prototype,"SocketEvents");var BigNumber=function(){function e(t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=-1),"number"==typeof t?0==t?(this.base=0,this.power=0):this.fromFloat(t):"string"==typeof t?this.fromString(t):t instanceof e?(this.base=t.base,this.power=t.power):(this.base=0,this.power=0)}return e.prototype.fromFloat=function(e){var t=this;t.base=e,t.power=0,t.normalize()},e.prototype.fromString=function(e){var t=e.split("e");this.base=Number(t[0]),t.splice(0,1),this.power=Number(t.join("e")),this.normalize()},e.prototype.normalize=function(){var e,t=this;if(0==t.base)return void(t.power=0);var n=Math.abs(t.base);n>=10?(e=Math.floor(Math.log(n)/Math.log(10)),t.base=t.base/Math.pow(10,e),t.power=t.power+e):1>n&&(e=0-Math.floor(Math.log(n)/Math.log(10)),t.base=t.base*Math.pow(10,e),t.power=t.power-e)},e.copy=function(t){var n=new e(0);return n.base=t.base,n.power=t.power,n},e.clone=function(t){return e.copy(t)},e.prototype.toString=function(){var e,t=this,n=t.base,r=t.power;if(5>r&&r>=0){for(;r>0;)n=10*n,r--;return e=n,t.normalize(),e.toString()}if(r>-5&&0>r){for(;0>r;)n/=10,r++;return e=n,t.normalize(),e.toString()}return n.toString()+"e"+r.toString()},e.prototype.toFixed=function(e){void 0===e&&(e=3);var t=this,n="",r=0,o=t.toString().split("e"),i=o[0].split(".");if(i[1])if(i[1].length<e)r=i[1].length,i[1]=i[1].substr(0,r);else{for(r=e;"0"==i[1].substr(r-1,1);)r--;i[1]=i[1].substr(0,r)}return o[1]?(o[0]=i[1]?i.join("."):i[0],n=o.join("e")):n=i[1]?i.join("."):i[0],n},e.prototype.toRoundShow=function(){var t,n=this,r=e.copy(n);r.normalize();var o=r.base,i=r.power;if(5>i&&i>=0){for(;i>0;)o=10*o,i--;return t=Math.round(o),t.toString()}if(i>-5&&0>i){for(;0>i;)o/=10,i++;return t=o,t.toFixed(3)}return e.charNumber?e.toCharNumber(r):r.toFixed()},e.prototype.numberValue=function(){var e=this;return e.base*Math.pow(10,e.power)},e.max=function(e,t){return e.biggerEqualThan(t)?e:t},e.min=function(e,t){return e.smallerEqualThan(t)?e:t},e.prototype.biggerEqualThan=function(e){var t=this,n=0;return 0==t.base?e.base<=0:0==e.base?t.base>=0:t.base<0!=e.base<0?t.base>e.base:(n=t.base>0?1:-1,n*t.power<n*e.power?!1:t.power==e.power?t.base>=e.base:!0)},e.prototype.biggerThan=function(e){var t=this,n=0;return 0==t.base?e.base<0:0==e.base?t.base>0:t.base<0!=e.base<0?t.base>e.base:(n=t.base>0?1:-1,n*t.power<n*e.power?!1:t.power==e.power?t.base>e.base:!0)},e.prototype.biggerThanOfNumber=function(t){var n=this;return 0==t?n.base>0:0==n.base?0>t:n.base<0!=0>t?n.base>t:n.biggerThan(new e(t))},e.prototype.biggerEqualThanOfNumber=function(t){var n=this;return 0==n.base?0>=t:0==t?n.base>=0:n.base<0!=0>t?n.base>t:n.biggerEqualThan(new e(t))},e.prototype.smallerEqualThan=function(e){var t,n=this;return 0==n.base?e.base>=0:0==e.base?n.base<=0:n.base<0!=e.base<0?n.base<e.base:(t=n.base>0?1:-1,t*n.power>t*e.power?!1:n.power==e.power?n.base<=e.base:!0)},e.prototype.smallerThan=function(e){var t,n=this;return 0==n.base?e.base>0:0==e.base?n.base<0:n.base<0!=e.base<0?n.base<e.base:(t=n.base>0?1:-1,t*n.power>t*e.power?!1:n.power==e.power?n.base<e.base:!0)},e.prototype.smallerThanOfNumber=function(t){var n=this;return n.smallerThan(new e(t))},e.prototype.smallerEqualThanOfNumber=function(t){var n=this;return n.smallerEqualThan(new e(t))},e.prototype.negate=function(){var t=this,n=e.copy(t);return n.base=-1*t.base,n},e.prototype.add=function(t){var n,r=this,o=e.copy(r),i=o.power-t.power;return i>10?o:-10>i?(o.base=t.base,o.power=t.power,o):0==i?(o.base=o.base+t.base,o.normalize(),o):i>0?(o.base=o.base*Math.pow(10,i),o.power=t.power,o.base=o.base+t.base,o.normalize(),o):0>i?(n=t.base*Math.pow(10,-i),o.base=o.base+n,o.normalize(),o):o},e.prototype.addN=function(t){var n=this;return n.add(new e(t))},e.prototype.plusEquals=function(e){var t,n=this,r=n.power-e.power;return r>10?void 0:-10>r?(n.base=e.base,void(n.power=e.power)):0==r?(n.base=n.base+e.base,void n.normalize()):r>0?(n.base=n.base*Math.pow(10,r),n.power=e.power,n.base=n.base+e.base,void n.normalize()):0>r?(t=e.base*Math.pow(10,-r),n.base=n.base+t,void n.normalize()):void 0},e.prototype.minusEquals=function(e){var t,n=this,r=n.power-e.power;return r>10?void 0:-10>r?(n.base=-e.base,void(n.power=e.power)):0==r?(n.base=n.base-e.base,void n.normalize()):r>0?(n.base=n.base*Math.pow(10,r),n.power=e.power,n.base=n.base-e.base,void n.normalize()):0>r?(t=e.base*Math.pow(10,-r),n.base=n.base-t,void n.normalize()):void 0},e.prototype.subtract=function(t){var n=this,r=e.copy(t);return r.base=-r.base,n.add(r)},e.prototype.multiply=function(t){var n=this,r=e.copy(n);return r.base=r.base*t.base,r.power=r.power+t.power,r.normalize(),r},e.prototype.timesEquals=function(e){var t=this;t.base=t.base*e.base,t.power=t.power+e.power,t.normalize()},e.prototype.multiplyN=function(t){var n=this,r=e.copy(n);return r.base=r.base*t,r.normalize(),r},e.prototype.timesEqualsN=function(e){var t=this;t.base=t.base*e,t.normalize()},e.prototype.divide=function(t){var n=this,r=e.copy(n),o=r.base/t.base;return 1e4>o&&(o=1e4*o,r.power=r.power-4),r.base=o,r.power=r.power-t.power,r.normalize(),r},e.prototype.divideN=function(t){var n=this;return n.divide(new e(t))},e.prototype.sqrt=function(){var t=this,n=e.copy(t);return n.power%2!=0&&(n.power=n.power-1,n.base=10*n.base),n.base=Math.sqrt(n.base),n.power=n.power/2,n.normalize(),n},e.prototype.pow=function(t){var n=this,r=e.copy(n),o=new e(1);if(0==t)return o;for(0>t&&(r=o.divide(r),t=-t);t>1;)t%2==0?(r.base=r.base*r.base,r.power=r.power+r.power,r.normalize(),t/=2):(o.base=r.base*o.base,o.power=r.power+o.power,o.normalize(),r.base=r.base*r.base,r.power=r.power+r.power,r.normalize(),t=(t-1)/2);return r.base=r.base*o.base,r.power=r.power+o.power,r.normalize(),r},e.prototype.percentIncreaseToMultiplier=function(){var e=this;return e.multiplyN(.01).addN(1)},e.prototype.equal=function(e){var t=this;return t.power!=e.power?!1:t.base==e.base?!0:!1},e.prototype.equalOfNumber=function(t){var n=this;return n.equal(new e(t))},e.prototype.floor=function(){var t,n=this,r=e.copy(n);return r.power<15&&(t=r.power,r.base=r.base*Math.pow(10,t),r.power=r.power-t,r.base=Math.floor(r.base),r.normalize()),r},e.prototype.ceil=function(){var t,n=this,r=e.copy(n);return r.power<15&&(t=r.power,r.base=r.base*Math.pow(10,t),r.power=r.power-t,r.base=Math.ceil(r.base),r.normalize()),r},e.prototype.round=function(){var t=this,n=e.copy(t),r=n.floor();return n.subtract(r).biggerThanOfNumber(.5)?n.ceil():r},e.toCharNumber=function(t){var n="",r="",o=0;if("number"==typeof t){var i=Number(t),a=Math.round(i).toString();if(a.length>5+3*e.totalChar)n=new e(i).toFixed();else if(a.length<=5)n=a;else{o=Math.ceil((a.length-5)/3),r=e.transformChar(o);var s=a.substr(0,a.length-3*o);n=e.headAdd(s)+r}}else{var c=e.copy(t);if(c.normalize(),c.power>4+3*e.totalChar)n=c.toFixed();else{for(var u=c.power;u>4;)u-=3,o++;if(0==o)n=String(Math.floor(c.base*Math.pow(10,u)));else{r=e.transformChar(o);var l=String(Math.floor(c.base*Math.pow(10,u)));
n=e.headAdd(l)+r}}}return n},e.transformChar=function(t){var n="",r="",o="";if(t<=e.charFour.length)o=e.charFour[t-1];else{var i=t-e.charFour.length-1,a=0;a=i<e.lettersCount?97:65,n=String.fromCharCode(i%e.lettersCount+a),r=i<2*e.lettersCount&&i>=e.lettersCount?n.toLowerCase():n,o=n+r}return o},e.headAdd=function(e){var t,n=e,r=n.length;return r>3&&(t=n.split(""),t.splice(r-3,0,","),n=t.join("")),n},e.charNumber=!1,e.charFour=["K","M","B","T"],e.lettersCount=26,e.totalChar=82,e}();__reflect(BigNumber.prototype,"BigNumber");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var ViewClassName=function(){function e(){}return e.LoginView=LoginView,e.GameMainView=GameMainView,e}();__reflect(ViewClassName.prototype,"ViewClassName");var DisplayLayer=function(e){function t(){var t=e.call(this)||this;t.layerName="",t.layerType=-1;return t}return __extends(t,e),t}(eui.UILayer);__reflect(DisplayLayer.prototype,"DisplayLayer");var LayerManager=function(){function e(){this._layers=[],this._sceneContainer=new eui.UILayer,this._gameContainer=new eui.UILayer}return Object.defineProperty(e.prototype,"sceneContainer",{get:function(){var e=this;return e._sceneContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameContainer",{get:function(){var e=this;return e._gameContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"getInstance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setup=function(t){var n=this;this.createAllLayers(),n._sceneContainer.touchThrough=!0,n._gameContainer.touchThrough=!0,t.addChild(n._sceneContainer),t.addChild(n.getLayerByType(e.POP_LAYER)),t.addChild(n.getLayerByType(e.TIP_LAYER)),n._sceneContainer.addChild(n._gameContainer),n._sceneContainer.addChild(n.getLayerByType(e.SCENE_BASE_LAYER)),n._sceneContainer.addChild(n.getLayerByType(e.SCENE_UI_LAYER)),n._sceneContainer.addChild(n.getLayerByType(e.SCENE_UI_EFFECT_LAYER)),n._sceneContainer.addChild(n.getLayerByType(e.SCENE_POP_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.GAME_MAP_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.GAME_EFFECT_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.GAME_MASCOT_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.GAME_UI_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.GAME_POP_LAYER)),n._gameContainer.addChild(n.getLayerByType(e.SCENE_RANK_LAYER)),t.addEventListener(egret.Event.RESIZE,n.onStageResize,n)},e.prototype.onStageResize=function(e){this.resize()},e.prototype.createAllLayers=function(){for(var t=0;t<e.layerCount;t++)this._layers.push(this.createOnLayer(t))},e.prototype.createOnLayer=function(e){var t=new DisplayLayer;return t.layerType=e,t.touchThrough=!0,t},e.prototype.addToLayer=function(e,t,n){void 0===n&&(n=!1);var r=this.getLayerByType(t);r.addChild(e),n&&DisplayUtils.centerObjectToStage(e,!0)},e.prototype.getLayerByType=function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t].layerType==e)return this._layers[t]},e.prototype.resize=function(){LogManager.logFormat("【 LayerManager 】stageResized----");for(var e=StageUtils.getInstance.stage.stageWidth,t=StageUtils.getInstance.stage.stageHeight,n=0;n<this._layers.length;n++)for(var r=this._layers[n],o=0;o<r.numChildren;o++){var i=r.getChildAt(o);instanceOfIStageResizeable(i)&&i.resize(e,t)}},e.TIP_LAYER=0,e.POP_LAYER=1,e.SCENE_RANK_LAYER=11,e.SCENE_POP_LAYER=2,e.SCENE_UI_EFFECT_LAYER=3,e.SCENE_UI_LAYER=4,e.SCENE_BASE_LAYER=5,e.GAME_POP_LAYER=6,e.GAME_UI_LAYER=7,e.GAME_EFFECT_LAYER=8,e.GAME_MASCOT_LAYER=10,e.GAME_MAP_LAYER=9,e.layerCount=12,e}();__reflect(LayerManager.prototype,"LayerManager");var ScenesManager=function(){function e(){var e=this;e._views=new TSDictionary}return Object.defineProperty(e.prototype,"currView",{get:function(){var e=this;return e._currView},set:function(e){var t=this;t._currView=e},enumerable:!0,configurable:!0}),e.prototype.openView=function(e,t,n,r,o,i){void 0===t&&(t=LayerManager.GAME_MAP_LAYER),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===i&&(i=!1);var a=this;return null!=a._currView&&e.uiName==a._currView.uiName?LogManager.logFormat("不可以切换同一个界面!"+e.uiName):(e.type==UIType.Scene?(a.hideCurrView(),a._sceneView=e):e.type==UIType.Panel&&r&&(t=LayerManager.GAME_UI_LAYER),a.showView(e,t,n,o),a._currView.fullScreen=i,void(a._currView.fullScreen&&a.hideScene()))},e.prototype.showView=function(e,t,n,r){void 0===r&&(r=!1);var o=this;if(o._views.ContainsKey(e.uiName)&&!r){var i=o._views.TryGetValue(e.uiName);o._currView=i,i.visible=!0,i.init(n,null),LayerManager.getInstance.addToLayer(i,t)}else o._currView=e,null!=o._currView&&(o._views.Add(o._currView.uiName,o._currView),o._currView.init(n,null),LayerManager.getInstance.addToLayer(o._currView,t))},e.prototype.hideScene=function(){var e=this;null!=e._sceneView&&(e._sceneView.visible=!1)},e.prototype.ShowScene=function(){var e=this;null!=e._sceneView&&(e._sceneView.visible=!0)},e.prototype.hideCurrView=function(){var e=this;null!=e._sceneView&&(e._sceneView.visible=!1,e._sceneView.hide(),e._sceneView.isCache||(e._views.Remove(e._sceneView.uiName),e._sceneView.dispose(),e._sceneView=null)),e._sceneView=null},e.prototype.hideView=function(e){var t=this,n=e+"";if(t._views.ContainsKey(n)){var r=t._views.TryGetValue(n);r.visible=!1,t._currView=null}},e.prototype.removeView=function(e){var t=this,n=e+"";if(t._views.ContainsKey(n)){var r=t._views.TryGetValue(n);r.close(),t._views.Remove(n)}},Object.defineProperty(e.prototype,"views",{get:function(){var e=this;return e._views},set:function(e){var t=this;t._views=e},enumerable:!0,configurable:!0}),e.prototype.removeAllView=function(){for(var e=this,t=e._views.getValues(),n=0;n<t.length;n++)t[n].dispose(),DisplayUtils.removeAllChildren(e._views.getValues()),t[n]=null;e._views.clear()},Object.defineProperty(e,"getInstance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(ScenesManager.prototype,"ScenesManager");var TouchPoint=function(){function e(){this.positions=[]}return e}();__reflect(TouchPoint.prototype,"TouchPoint");var UIModel=function(){function e(){}return e}();__reflect(UIModel.prototype,"UIModel");var UIType;!function(e){e[e.Scene=0]="Scene",e[e.Panel=1]="Panel",e[e.Alert=2]="Alert"}(UIType||(UIType={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=this,n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),t.initData(),ext.loadServerConfig(function(){t.initPlatform()})},t.prototype.initData=function(){var e=this;egret.ImageLoader.crossOrigin="anonymous",StageUtils.getInstance.setup(e.stage),LayerManager.getInstance.setup(e.stage),StageUtils.setFrameRate(30),GameConfig.IsMobile=egret.Capabilities.isMobile,egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?(this.stage.orientation=egret.OrientationMode.PORTRAIT,StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT)):"windows"==GameConfig.systemType()?(this.stage.orientation=egret.OrientationMode.AUTO,StageUtils.setScaleMode(egret.StageScaleMode.SHOW_ALL)):(this.stage.orientation=egret.OrientationMode.PORTRAIT,StageUtils.setScaleMode(egret.StageScaleMode.SHOW_ALL))},t.prototype.initPlatform=function(){var e=this;PathManager.Instance.resourceUrl=ext.getResourceUrl(),e.loadConfigs()},t.prototype.loadConfigs=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){for(e=PathManager.Instance.ConfigUrls,t=0;t<e.length;t++)ResUtil.getInstance.addConfig(e[t],PathManager.Instance.resourceUrl);return ResUtil.getInstance.loadConfig(this.loadLoadingResource,this),[2]})})},t.prototype.loadLoadingResource=function(){var e=this;ResUtil.getInstance.loadGroup(["game"],function(){e.loadTheme()},e)},t.prototype.loadTheme=function(){var e=this,t=new eui.Theme(PathManager.Instance.ThemePath,this.stage),n=function(){var t=function(e,t){LanguageManager.getInstance.setup(e)};e.createGameScene(),RES.getResByUrl(PathManager.Instance.language_path,t,e,RES.ResourceItem.TYPE_TEXT)};t.addEventListener(eui.UIEvent.COMPLETE,n,this)},t.prototype.createGameScene=function(){egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME&&(document.getElementById("preloading").style.display="none",document.getElementById("circleId").style.display="none"),LoginManager.getInstance.setup(),"dev"==ext.getPlatform()&&ScenesManager.getInstance.openView(UIUtil.createScene(ViewClassName.LoginView),LayerManager.GAME_MAP_LAYER,!0)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var SimpleList=function(e){function t(){var t=e.call(this)||this;return t._items=[],t.touchPoints=[],t.DistanceToTime=700,t.PositionMutiply=4,t._mask=new egret.Shape,t._viewWidth=0,t._viewHeight=0,t._minItemHeight=0,t._itemGap=0,t._scrollPosition=0,t}return __extends(t,e),t.prototype.initList=function(){null!=this._itemRender&&0!=this._minItemHeight&&0!=this._viewWidth&&0!=this._viewHeight&&(this.createMask(),this.createListItems(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this))},t.prototype.onTouchBegin=function(e){var t=this.searchTouchPoint(e.touchPointID);null==t&&(t=new TouchPoint,t.touchPointID=e.touchPointID),t.positions.push(new egret.Point(e.stageX,e.stageY)),this.touchPoints.push(t)},t.prototype.onTouchMove=function(e){this.updateScroll(e.touchPointID,e.stageX,e.stageY,!1)},t.prototype.onTouchEnd=function(e){var t=this.updateScroll(e.touchPointID,e.stageX,e.stageY,!0);ObjectUtils.removeFromArray(t,this.touchPoints)},t.prototype.searchTouchPoint=function(e){for(var t=0;t<this.touchPoints.length;t++)if(this.touchPoints[t].touchPointID==e)return this.touchPoints[t]},t.prototype.updateScroll=function(e,t,n,r){var o=this.searchTouchPoint(e);if(null==o)return null;o.positions.push(new egret.Point(t,n));var i=o.positions.length-1,a=egret.Point.distance(o.positions[i],o.positions[i-1]);r&&(a*=this.PositionMutiply),o.positions[i].y<o.positions[i-1].y&&(a=-a);var s=MathUtils.Clamp(0,this.getMaxScrollPosition(),this.scrollPosition+a);return r?egret.Tween.get(this).to({scrollPosition:s},Math.abs(a)/this.DistanceToTime*1e3,egret.Ease.backOut):this.scrollPosition=s,o},t.prototype.createMask=function(){this._mask.graphics.beginFill(16711680),this._mask.graphics.drawRect(0,0,this._viewWidth,this._viewHeight),this._mask.graphics.endFill(),this.addChild(this._mask),this.mask=this._mask},t.prototype.createListItems=function(){for(var e=this._viewHeight/this._minItemHeight+2,t=0;e>t;t++){var n=new this._itemRender;this._items.push(n)}},t.prototype.render=function(){if(null!=this._data)for(var e=this.positionToStartIndex(this._scrollPosition),t=e[0],n=e[1],r=0;r<this._items.length;r++){var o=this._items[r],i=this._data[r+t];null!=i?(this.addChild(o),o.dataUpdate(i),this._data[r+t].$itemHeight=o.height,o.y=n,n+=o.height,n+=this.itemGap):DisplayUtils.removeFromParent(o)}},t.prototype.positionToStartIndex=function(e){var t,n=e,r=n;for(t=0;t<this.data.length;t++){if(n>=0)return[t-1,r];r=n,n+=this.data[t].$itemHeight?this.data[t].$itemHeight:this.minItemHeight,n+=this.itemGap}return[t-1,r]},t.prototype.getMaxScrollPosition=function(){for(var e=0,t=0;t<this.data.length;t++)e-=this.data[t].$itemHeight?this.data[t].$itemHeight:this.minItemHeight,e-=this.itemGap;return e+this._viewHeight},Object.defineProperty(t.prototype,"itemRender",{set:function(e){this._itemRender=e,this.initList()},enumerable:!0,configurable:!0}),t.prototype.viewport=function(e,t){this._viewWidth=e,this._viewHeight=t,this.initList()},Object.defineProperty(t.prototype,"minItemHeight",{get:function(){return this._minItemHeight},set:function(e){this._minItemHeight=e,this.initList()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){this._itemGap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(e){this._scrollPosition=e,this.render()},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(SimpleList.prototype,"SimpleList");var UI;!function(e){var t=function(){function e(e,t){this._view=null,this._btnArr=[];var n=this;n._view=e,n._btnArr=t,n.initBtnEffect()}return e.prototype.initBtnEffect=function(){var e=this;if(e._btnArr&&e._btnArr.length)for(var t=e._btnArr.length,n=0;t>n;n++)e._view[e._btnArr[n]].addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onBtnBegin,e),e._view[e._btnArr[n]].anchorOffsetY=e._view[e._btnArr[n]].height/2,e._view[e._btnArr[n]].anchorOffsetX=e._view[e._btnArr[n]].width/2,e._view[e._btnArr[n]].x=e._view[e._btnArr[n]].x+e._view[e._btnArr[n]].width/2,e._view[e._btnArr[n]].y=e._view[e._btnArr[n]].y+e._view[e._btnArr[n]].height/2},e.prototype.onBtnBegin=function(e){var t=this,n=e.target;n&&(t._curBtn=n);var r=n.name;if(r)var o=Number(r.split("_")[1]),i=Number("0x"+r.split("_")[3]);var a=r.split("#")[1];if(a)if("1"==a?SoundManager.playEffect(10005):"2"==a?SoundManager.playEffect(10006):"3"===a?SoundManager.playEffect(10007):"4"===a&&SoundManager.playEffect(10008),o||(o=1),t._curType=o,n.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchCancle,t),n.$stage.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),e.updateAfterEvent(),1==o)n.scaleY=n.scaleY-.1,n.scaleX=n.scaleX-.1;else if(2==o){if(n.numChildren){var s=n.getChildAt(0);s&&(s.visible=!0);var c=n.getChildAt(1);c&&(c.visible=!1);var u=n.getChildAt(2);i&&u&&(u.textColor=i)}}else if(3==o){if(n.scaleY=n.scaleY-.1,n.scaleX=n.scaleX-.1,n.numChildren){var s=n.getChildAt(0);s&&(s.visible=!0);var c=n.getChildAt(1);c&&(c.visible=!1);var u=n.getChildAt(2);i&&u&&(u.textColor=i)}}else if(4==o){var s=n.getChildAt(0);s&&(s.visible=!0);var c=n.getChildAt(1);c&&(c.visible=!1)}},e.prototype.onTouchCancle=function(e){var t=this,n=t._curBtn;if(n){var r=e.$currentTarget,o=Number("0x"+n.name.split("_")[2]);if(r.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchCancle,t),r.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),1==t._curType)n.scaleY=n.scaleY+.1,n.scaleX=n.scaleX+.1;else if(2==t._curType){if(n.numChildren){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0);var s=n.getChildAt(2);o&&s&&(s.textColor=o)}}else if(3==t._curType){if(n.scaleY=n.scaleY+.1,n.scaleX=n.scaleX+.1,n.numChildren){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0);var s=n.getChildAt(2);o&&s&&(s.textColor=o)}}else if(4==t._curType){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0)}}},e.prototype.onTouchEnd=function(e){var t=this,n=t._curBtn;if(n){var r=e.$currentTarget,o=Number("0x"+n.name.split("_")[2]);if(r.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchCancle,t),r.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),1==t._curType)n.scaleY=n.scaleY+.1,n.scaleX=n.scaleX+.1;else if(2==t._curType){if(n.numChildren){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0);var s=n.getChildAt(2);o&&s&&(s.textColor=o)}}else if(3==t._curType){if(n.scaleY=n.scaleY+.1,n.scaleX=n.scaleX+.1,n.numChildren){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0);var s=n.getChildAt(2);o&&s&&(s.textColor=o)}}else if(4==t._curType){var i=n.getChildAt(0);i&&(i.visible=!1);var a=n.getChildAt(1);a&&(a.visible=!0)}}},e.prototype.dispose=function(){var e=this;if(e._btnArr&&e._btnArr.length)for(var t=e._btnArr.length,n=0;t>n;n++)e._view[e._btnArr[n]].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onBtnBegin,e),e._view[e._btnArr[n]].anchorOffsetY=e._view[e._btnArr[n]].height/2,e._view[e._btnArr[n]].anchorOffsetX=e._view[e._btnArr[n]].width/2,e._view[e._btnArr[n]].x=e._view[e._btnArr[n]].x+e._view[e._btnArr[n]].width/2,e._view[e._btnArr[n]].y=e._view[e._btnArr[n]].y+e._view[e._btnArr[n]].height/2;e._btnArr=[],e._curBtn=null},e}();e.BtnEffectComponent=t,__reflect(t.prototype,"UI.BtnEffectComponent")}(UI||(UI={}));var UI;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;n._select=!1;var r=n;return r.skinName=t,r.addEventListener(egret.Event.REMOVED_FROM_STAGE,r.onRemoveFromStage,r,!1),r.addEventListener(egret.Event.ADDED_TO_STAGE,r.onAddToStage,r,!1),n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=this;LanguageManager.getInstance.setModuleLanguage(t)},t.prototype.update=function(e){void 0===e&&(e=null);for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&(this._info=e),this.updateView()},t.prototype.updateView=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.hasData=function(e){for(var t=this,n=t.getDatas(),r=0;r<n.length;r++)if(n[r]==e)return!0;return!1},t.prototype.getDatas=function(){return null},t.prototype.onDataChanged=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.prototype.onAddToStage=function(e){var t=this;t.showToStage(),t.addEvents()},t.prototype.showToStage=function(){},t.prototype.onRemoveFromStage=function(e){var t=this;t.removeEvents()},t.prototype.selectView=function(){},Object.defineProperty(t.prototype,"select",{get:function(){return this._select},set:function(e){var t=this;t._select=e,t.selectView()},enumerable:!0,configurable:!0}),t.prototype.addEvents=function(){},t.prototype.removeEvents=function(){},t.prototype.hide=function(){var e=this;null!=e.parent&&e.parent.removeChild(e)},t.prototype.gotoCallBack=function(){},t.prototype.dispose=function(){var e=this;e.hide()},t}(eui.ItemRenderer);e.BaseItem=t,__reflect(t.prototype,"UI.BaseItem")}(UI||(UI={}));var UI;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;n.offsetX=0,n.offsetY=0,n.offsetW=0,n.offsetH=0,n.isDispose=!1,n.isMaskTouch=!0;var r=n;return r.type=UIType.Alert,r.isCache=!1,n}return __extends(t,e),t.prototype.show=function(){e.prototype.show.call(this);var t=this;t.isDispose=!1,t.onDisplayResizeHandler(),t.maskImg||t.getImgMask(.7),t.anchorOffsetY=StageUtils.getInstance.stage.stageHeight,LayerManager.getInstance.addToLayer(t.maskImg,LayerManager.GAME_UI_LAYER),this.x=StageUtils.getInstance.stage.stageWidth-this.width>>1,this.y=StageUtils.getInstance.stage.stageHeight-this.height>>1,LayerManager.getInstance.addToLayer(t,LayerManager.GAME_POP_LAYER),egret.Tween.get(t).to({anchorOffsetY:0},300).call(function(){egret.Tween.removeTweens(t)}),t.isMaskTouch&&t.maskImg&&t.maskImg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onMaskHandler,t),t.btn_close&&t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closePanel,t)},t.prototype.showToStage=function(){e.prototype.showToStage.call(this)},t.prototype.addEvents=function(){e.prototype.addEvents.call(this);var t=this;t.addEventListener(egret.Event.RESIZE,t.onDisplayResizeHandler,t)},t.prototype.removeEvents=function(){e.prototype.removeEvents.call(this);var t=this;t.btn_close&&t.btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closePanel,t),t.isMaskTouch&&t.maskImg&&t.maskImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onMaskHandler,t),t.removeEventListener(egret.Event.RESIZE,t.onDisplayResizeHandler,t)},t.prototype.onMaskHandler=function(){var e=this;e.closePanel()},t.prototype.onDisplayResizeHandler=function(){var e=this;e.x=(StageUtils.getInstance.stage.stageWidth-(e.width-e.offsetW)>>1)+e.offsetX,e.y=(StageUtils.getInstance.stage.stageHeight-(e.height-e.offsetH)>>1)+e.offsetY},t.prototype.getMask=function(e){var t=new eui.Rect;return t.touchEnabled=!0,t.percentWidth=100,t.percentHeight=100,t.fillColor=0,t.fillAlpha=e,t},t.prototype.getImgMask=function(e){var t=this;t.maskImg=new eui.Image,t.maskImg.source="com_json.frame_alpha_1",t.maskImg.alpha=e,t.maskImg.scale9Grid=new egret.Rectangle(12,12,76,76),t.maskImg.bottom=0,t.maskImg.top=0,t.maskImg.right=0,t.maskImg.left=0},t.prototype.closePanel=function(){var e=this;return null!=e.getBackName()?void ScenesManager.getInstance.openView(UIUtil.createAlert(e.getBackName())):void e.dispose()},t.prototype.hide=function(){e.prototype.hide.call(this);var t=this;DisplayUtils.removeFromParent(t.maskImg),t.maskImg=null},t}(e.BaseView);e.BaseAlert=t,__reflect(t.prototype,"UI.BaseAlert")}(UI||(UI={}));var UI;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this,r=n;return r.type=UIType.Panel,n}return __extends(t,e),t}(e.BaseView);e.BasePanel=t,__reflect(t.prototype,"UI.BasePanel")}(UI||(UI={}));var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var CSVParser=function(){function e(){}return e.ParseJsonData=function(e,t){var n=this,r=new TSDictionary;t=t.trim();var o=JSON.parse(t),i=null,a=null,s=null,c=null;if(i=o.titles,null==o.data)return r;s=o.data,a=s[0];var u=0,l=s.length;for(u=0;l>u;u++){var p=new e;c=s[u],n.ParseRecord(i,c,p),r.Add(parseInt(c[0]),p)}return t=null,r},e.ParseRecord=function(e,t,n){for(var r=t.length,o=0;r>o;o++)n[e[o]]=t[o]},e}();__reflect(CSVParser.prototype,"CSVParser");var DisplayUtils=function(){function e(){}return e.getChildIndex=function(e){return null==e||null==e.parent?-1:e.parent.getChildIndex(e)},e.textDotAnimation=function(e){var t=e.text,n=egret.Tween.get(e,{loop:!0});n.to({},500).call(function(){e.text=t+"."}),n.to({},500).call(function(){e.text=t+".."}),n.to({},500).call(function(){e.text=t+"..."}),n.to({},500).call(function(){e.text=t}),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(e),n=null},this)},e.getLocalPos=function(e,t,n){var r=t.localToGlobal(n.x,n.y);return e.globalToLocal(r.x,r.y)},e.safeRemoveChild=function(e){null!=e&&null!=e.parent&&e.parent.removeChild(e)},e.scaleToNormalSizeWithContainer=function(t,n){var r=e.searchContainerScale(t.parent,n);t.scaleX=1/r,t.scaleY=1/r},e.searchContainerScale=function(t,n){var r=1;return t!=n&&(r=e.searchContainerScale(t.parent,n)*r),r},e.createBitmap=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t.name=e,t},e.setBoxLayout=function(e,t,n,r){var o=n.y-(e.y+e.height);o>0&&t.scaleY},e.removeFromParent=function(e){e&&(e.parent&&e.parent.removeChild(e),e=null)},e.removeAllChildren=function(e){if(e&&e&&e.numChildren)for(;e.numChildren;){var t=e.getChildAt(0);t&&(t.parent&&t.parent.removeChild(t),t=null)}},e.traceAllChildren=function(e){if(e)for(var t=0;t<e.numChildren;t++){e.getChildAt(t)}},e.setText=function(e,t){if(void 0===t&&(t=""),e){var n=new egret.HtmlTextParser;e.textFlow=n.parser(t)}},e.traceDisplayObjectWhyNotDisplay=function(e){null!=e.parent&&this.traceDisplayObjectWhyNotDisplay(e.parent)},e.resetDisplay=function(e){null!=e&&(e.x=0,e.y=0,e.scaleX=1,e.scaleX=1)},e.addToStageCenter=function(t,n){void 0===n&&(n=!1),StageUtils.getInstance.stage.addChild(t),e.centerObjectToStage(t,n)},e.centerObjectToStage=function(e,t){void 0===t&&(t=!1),t?(e.x=StageUtils.getInstance.stage.stageWidth/2,e.y=StageUtils.getInstance.stage.stageHeight/2):(e.x=(StageUtils.getInstance.stage.stageWidth-e.width)/2,e.y=(StageUtils.getInstance.stage.stageHeight-e.height)/2)},e.ifIsDisplay=function(e){return e.visible?0==e.alpha?!1:0==e.width?!1:0==e.height?!1:null==e.parent?!1:!0:!1},e.SortDisplayBy_Y=function(e,t){e.sort(function(e,t){return t.y-e.y});for(var n=0;n<e.length;n++)t.addChildAt(e[n],0)},e.layoutDisplayWithInnerRect=function(e,t,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),null!=t){0==n&&0==r?(n=e.parent.width,r=e.parent.height):-1==n&&-1==r&&(n=StageUtils.getInstance.stage.stageWidth,r=StageUtils.getInstance.stage.stageHeight);var o=t.getInnerRect(n,r);e.x=o.x,e.y=o.y,e.width=o.width,e.height=o.height}},e.addAsyncBimapToContainer=function(e,t){RES.getResByUrl(e,function(){var n=RES.getRes(e),r=new egret.Bitmap(n);t.addChild(r)},this,RES.ResourceItem.TYPE_IMAGE)},e.addAsyncBitmapToImage=function(e,t){RES.getResByUrl(e,function(){t.source=RES.getRes(e)},this,RES.ResourceItem.TYPE_IMAGE)},e.setFilters=function(e){if(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]}},e.stableFramerate=30,e.red=16516357,e.white=16777215,e.black=0,e.green=6946645,e}();__reflect(DisplayUtils.prototype,"DisplayUtils");var InnerRectangle=function(){function e(e,t,n,r,o){void 0===o&&(o=0),this.para1=e,this.para2=t,this.para3=n,this.para4=r,this.lockDirection=o}return e.prototype.equals=function(e){return null==e?!1:this.para4==e.para4&&this.para1==e.para1&&this.lockDirection==e.lockDirection&&this.para2==e.para2&&this.para3==e.para3},e.prototype.getInnerRect=function(e,t){return this._outerWidth=e,this._outerHeight=t,this.calculateCurrent()},e.prototype.calculateCurrent=function(){var e=new egret.Rectangle;return this.lockDirection==LockDirectionTypes.UNLOCK?(e.x=this.para1,e.y=this.para3,e.width=this._outerWidth-this.para1-this.para2,e.height=this._outerHeight-this.para3-this.para4):this.lockDirection==LockDirectionTypes.LOCK_T?(e.x=this.para1,e.y=this.para3,e.width=this._outerWidth-this.para1-this.para2,e.height=this.para4):this.lockDirection==LockDirectionTypes.LOCK_L?(e.x=this.para1,e.y=this.para3,e.width=this.para2,e.height=this._outerHeight-this.para3-this.para4):this.lockDirection==LockDirectionTypes.LOCK_R?(e.x=this._outerWidth-this.para1-this.para2,e.y=this.para3,e.width=this.para1,e.height=this._outerHeight-this.para3-this.para4):this.lockDirection==LockDirectionTypes.LOCK_B?(e.x=this.para1,e.y=this._outerHeight-this.para3-this.para4,e.width=this._outerWidth-this.para1-this.para2,e.height=this.para3):this.lockDirection==LockDirectionTypes.NO_SCALE_T?(e.x=(this._outerWidth-this.para1)/2+this.para4,e.y=this.para3,e.width=this.para1,e.height=this.para2):this.lockDirection==LockDirectionTypes.NO_SCALE_B?(e.x=(this._outerWidth-this.para1)/2+this.para3,e.y=this._outerHeight-this.para4-this.para2,e.width=this.para1,e.height=this.para2):this.lockDirection==LockDirectionTypes.NO_SCALE_L?(e.x=this.para1,e.y=(this._outerHeight-this.para4)/2+this.para2,e.width=this.para3,e.height=this.para4):this.lockDirection==LockDirectionTypes.NO_SCALE_R?(e.x=this._outerWidth-this.para2-this.para3,e.y=(this._outerHeight-this.para3)/2+this.para1,e.width=this.para3,e.height=this.para4):this.lockDirection==LockDirectionTypes.NO_SCALE_TL?(e.x=this.para1,e.y=this.para3,e.width=this.para2,e.height=this.para4):this.lockDirection==LockDirectionTypes.NO_SCALE_TR?(e.x=this._outerWidth-this.para1-this.para2,e.y=this.para3,e.width=this.para1,e.height=this.para4):this.lockDirection==LockDirectionTypes.NO_SCALE_BL?(e.x=this.para1,e.y=this._outerHeight-this.para4-this.para3,e.width=this.para2,e.height=this.para3):this.lockDirection==LockDirectionTypes.NO_SCALE_BR?(e.x=this._outerWidth-this.para1-this.para2,e.y=this._outerHeight-this.para4-this.para3,e.width=this.para1,e.height=this.para3):this.lockDirection==LockDirectionTypes.UNLOCK_OUTSIDE?(e.x=-this.para1,e.y=-this.para3,e.width=this._outerWidth+this.para1+this.para2,e.height=this._outerHeight+this.para4+this.para3):this.lockDirection==LockDirectionTypes.NO_SCALE_C?(e.x=(this._outerWidth-this.para2)/2+this.para1,e.y=(this._outerHeight-this.para4)/2+this.para3,e.width=this.para2,e.height=this.para4):this.lockDirection==LockDirectionTypes.LOCK_TL?(e.x=this.para1,e.y=this.para2,e.width=this._outerWidth-this.para3,e.height=this._outerHeight-this.para4):this.lockDirection==LockDirectionTypes.LOCK_OUTER_DOWN&&(e.x=this.para1,e.y=this.para2,e.width=this._outerWidth-this.para3,e.height=this.para4),e},e}();__reflect(InnerRectangle.prototype,"InnerRectangle");var LockDirectionTypes=function(){function e(){}return e.LOCK_B=4,e.LOCK_L=2,e.LOCK_R=3,e.LOCK_T=1,e.UNLOCK=0,e.NO_SCALE_T=9,e.NO_SCALE_B=10,e.NO_SCALE_L=11,e.NO_SCALE_R=12,e.NO_SCALE_TL=13,e.NO_SCALE_TR=14,e.NO_SCALE_BL=15,e.NO_SCALE_BR=16,e.NO_SCALE_C=17,e.UNLOCK_OUTSIDE=-1,e.LOCK_TL=5,e.LOCK_TR=6,e.LOCK_OUTER_DOWN=18,e}();__reflect(LockDirectionTypes.prototype,"LockDirectionTypes");var MathUtils=function(){function e(){}return e.Clamp=function(e,t,n){return Math.max(t,Math.min(n,e))},e.Approximately=function(e,t){return Math.abs(e-t)<.01},e.Range=function(e,t){var n=Math.max(e,t),r=Math.min(e,t);return Math.random()*(n-r)+r},e.moveToNextPosition=function(t,n,r){var o=e.getAngle(t,n),i=t.x+r*Math.cos(o*Math.PI/180),a=t.y-r*Math.sin(o*Math.PI/180);t.x=i,t.y=a},e.getAngle=function(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),i=Math.acos(n/o),a=180/(Math.PI/i);return 0>r?a=-a:0==r&&0>n&&(a=180),a},e.getNewAngle=function(e,t){var n=180+180*Math.atan2(e.x-t.x,e.y-t.y)/Math.PI;return n},e.randomBool=function(){return 1==Math.round(Math.random())},e.randomPointFromRect=function(e){var t=new egret.Point;return t.x=Math.random()*e[2]+e[0],t.y=Math.random()*e[3]+e[1],t},e.Deg2Rad=.01745329,e.Rad2Deg=57.29578,e.Max=9999999,e}();__reflect(MathUtils.prototype,"MathUtils");var ObjectPool=function(){function e(){this._objs=new Array}return e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];e._content[t]||(e._content[t]=[]);var i=e._content[t];if(i.length)return i.pop();var a,s=n,c=r.length;return 0==c?a=new s:1==c?a=new s(r[0]):2==c?a=new s(r[0],r[1]):3==c?a=new s(r[0],r[1],r[2]):4==c?a=new s(r[0],r[1],r[2],r[3]):5==c&&(a=new s(r[0],r[1],r[2],r[3],r[4])),a.ObjectPoolKey=t,a},e.popWithExtraKey=function(t,n){e._content[t]||(e._content[t]=[]);var r,o=e._content[t];if(o.length)for(var i=0;i<o.length;i++)if(o[i].extraKey==n){r=o[i],o.splice(i,1);break}if(!r){var a=egret.getDefinitionByName(t);r=new a(n),r.extraKey=n,r.ObjectPoolKey=t}return r},e.push=function(t){if(null==t)return!1;var n=t.ObjectPoolKey;return e._content[n]?(e._content[n].push(t),!0):!1},e.clear=function(){e._content={}},e.clearClass=function(t,n){void 0===n&&(n=null);for(var r=e._content[t];r&&r.length;){var o=r.pop();n&&o[n](),o=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,n){var r=e._content[t];if(null!=r){var o=0,i=r.length;for(o;i>o;o++)r[o][n]()}},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var ObjectUtils=function(){function e(){}return e.copyValue=function(e,t){for(var n in t){var r=t[n],o=(egret.getQualifiedClassName(r),this.isBaseType(t[n]));o?e[n]=t[n]:this.copyValue(e[n],t[n])}},e.isBaseType=function(t){var n=egret.getQualifiedClassName(t),r=e.BASETYPES.indexOf(n);return-1!=r},e.removeFromArray=function(e,t){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t},e.getRandomFromIn=function(e){if(null==e||e.length<1)return 0;var t=e[0]+Math.random()*(e[1]-e[0]),n=Math.floor(t);return n},e.getRandomStr=function(t,n){void 0===n&&(n="#");var r=t.split(n);
return e.getRandomItem(r)},e.getRandomItem=function(e){if(null==e||e.length<1)return null;var t=Math.random()*e.length,n=Math.floor(t);return e[n]},e.shuffle=function(e){for(var t=e.length,n=t;n--;){var r=Math.floor(Math.random()*t);if(n!=r){var o=e[n];e[n]=e[r],e[r]=o}}},e.charExchange=function(e){for(var t=e,n=0;n<t.length;n++){t.substr(n,1)}return t},e.disposeArray=function(e){},e.splitToString=function(e,t){void 0===t&&(t=",");for(var n=[],r=e.split(t),o=0;o<r.length;o++)n.push(r[o]);return n},e.updateUrl=function(e,t){void 0===t&&(t="t");var n=new RegExp(t+"\\d+"),r=+new Date;if(e.indexOf(t)>-1)return e.replace(n,t+r);if(e.indexOf("?")>-1){var o=e.split("?");return o[1]?o[0]+"?"+t+r+"&"+o[1]:o[0]+"?"+t+r}return e.indexOf("#")>-1?e.split("#")[0]+"?"+t+r+location.hash:e+"?"+t+r},e.BASETYPES=["boolean","number","string","null"],e}();__reflect(ObjectUtils.prototype,"ObjectUtils");var ResourcePool=function(){function e(){this.main={},this.main[e.SKE]={},this.main[e.BITMAPTEXT]={},this.main[e.BITMAP]={}}return e.getIntance=function(){return this._ins||(this._ins=new e),this._ins},e.createOneByType=function(t,n){switch(n==e.Trace_ID&&LogManager.logFormat("ResourcePool . {0} : {1}","createOneByType",n),t){case e.SKE:var r=new BoneAnimation(n);BoneConfig.copyValueFromTemplate(r,n);return r.name=n,r.load(),r;case e.BITMAPTEXT:var o=new egret.BitmapText;return o.name=n,o.font=RES.getRes(n),o;case e.BITMAP:var i=new egret.Bitmap;return i.name=n,i.texture=RES.getRes(n),i}LogManager.errorFormat("Can't Create Instance of : "+t+"with ResId: "+n)},e.prototype.getPoolByType=function(t){switch(t){case e.SKE:return this.main[e.SKE];case e.BITMAPTEXT:return this.main[e.BITMAPTEXT];case e.BITMAP:return this.main[e.BITMAP]}return null},e.prepareItem=function(t,n){switch(n){case e.SKE:t instanceof BoneAnimation?t.initBone():LogManager.errorFormat("item type not match!!"+t.name+"  type :"+n)}},e.prototype.pop=function(t,n){var r=this.getPoolByType(n);null==r[t]&&(r[t]=[]),t==e.Trace_ID&&LogManager.logFormat("ResourcePool . {0} : {1}","pop",t);var o=r[t];if(o.length>0){var i=o.pop();return e.prepareItem(i,n),i}return e.createOneByType(n,t)},e.prototype.push=function(t,n){if(null!=t){var r=this.getPoolByType(n);if(null==r[t.name])return void console.log("回收对象的数组不存在",t.name);t.name==e.Trace_ID&&LogManager.logFormat("ResourcePool . {0} : {1}","push",t.name),r[t.name].push(t);var o=t.parent;null!=o&&o.removeChild(t),DisplayUtils.resetDisplay(t),t.resetForPool&&t.resetForPool()}},e.prototype.create=function(t,n,r){void 0===r&&(r=1);var o,i=[];for(t==e.Trace_ID&&LogManager.logFormat("ResourcePool . {0} : {1}  {2}","create",t,r),o=0;r>o;o++)i.push(this.pop(t,n));for(o=0;r>o;o++)this.push(i.pop(),n)},e.prototype.hasItem=function(e,t){if(null==e)return!1;var n=this.getPoolByType(t);if(null==n[e.name])return!1;var r=n[e.name];return r.indexOf(e)>=0},e.prototype.getLen=function(e,t){var n=this.getPoolByType(t);return n[e]?n[e].length:0},e.prototype.clear=function(t,n,r){function o(e){null!=e&&(r&&this.dealFun(e.name,n,r),e=null,delete i[e.name])}void 0===r&&(r="dispose");var i=this.getPoolByType(n);if(t==e.Trace_ID&&LogManager.logFormat("ResourcePool . {0} : {1}  {2}","clear",t,n),""==t)for(var a in i)o(i[a]);else o(i[t])},e.prototype.dealFun=function(e,t,n){var r=this.getPoolByType(t);if(r[e])for(var o=r[e],i=o.length,a=0;i>a;a++)o[a][n]&&o[a][n]()},e.prototype.printAll=function(){LogManager.logFormat("Start Print All Resource-------------");var e=0;for(var t in this.main){LogManager.logFormat("Start Print All Resource by type : "+t+"==================");for(var n in this.main[t]){var r=this.main[t][n].length;LogManager.logFormat("key :"+n+"  count:"+r),e+=r}}LogManager.logFormat("Start Print All Resource count : "+e+"==================")},e.SKE="Animation",e.BITMAPTEXT="BitmapText",e.BITMAP="Bitmap",e.Trace_ID="tx_01",e}();__reflect(ResourcePool.prototype,"ResourcePool");var ResUtil=function(){function e(){this._loadingGroups=[],this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}return Object.defineProperty(e.prototype,"loadingGroups",{get:function(){return this._loadingGroups},enumerable:!0,configurable:!0}),e.prototype.addConfig=function(e,t){this._configs.push([e,t])},e.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},e.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},e.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},e.prototype.loadGroupQuiet=function(e,t){void 0===t&&(t=1);var n=this.combGroupName(e);this._loadingGroups.indexOf(n)<0&&(this._loadingGroups.push(n),RES.loadGroup(n,t))},e.prototype.loadGroup=function(e,t,n,r){void 0===r&&(r=1);var o=this.combGroupName(e);this.createGroupInfo(o,t,null,n),this._loadingGroups.indexOf(o)<0&&(this._loadingGroups.push(o),RES.loadGroup(o,r))},e.prototype.loadGroupWithPro=function(e,t,n,r){var o=this.combGroupName(e);this.createGroupInfo(o,t,n,r),this._loadingGroups.indexOf(o)<0&&(this._loadingGroups.push(o),RES.loadGroup(o))},e.prototype.combGroupName=function(e){if("string"==typeof e)return e;for(var t=e.length,n="",r=0;t>r;r++)n+=e[r];return RES.createGroup(n,e,!1),n},e.prototype.createGroupInfo=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this._groups[e]||(this._groups[e]=[]),this._groups[e].push({onComplete:t,thisObject:r,onProgress:n})},e.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(RES.isGroupLoaded(t)){var n=this._loadingGroups.indexOf(t);if(n>=0&&this._loadingGroups.splice(n,1),this._groups[t]){for(var r=0;r<this._groups[t].length;r++){var o=this._groups[t][r].onComplete,i=this._groups[t][r].thisObject;null!=o&&o.call(i)}this._groups[t]=null,delete this._groups[t]}}},e.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t])for(var n=0;n<this._groups[t].length;n++){var r=this._groups[t][n].onProgress,o=this._groups[t][n].thisObject;null!=r&&r.call(o,e)}},e.prototype.onResourceLoadError=function(e){this.onResourceLoadComplete(e)},e.prototype.loadAsyncSound=function(e,t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return RES.getResByUrl(PathManager.Instance.SoundPath+e,function(){t&&t()},this,RES.ResourceItem.TYPE_SOUND),[2]})})},Object.defineProperty(e,"getInstance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.PRIORITY_H=10,e.PRIORITY_M=5,e.PRIORITY_L=1,e}();__reflect(ResUtil.prototype,"ResUtil");var ShakeUtils=function(){function e(){this.count=0}return Object.defineProperty(e,"Instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.shakeObj=function(e,t,n,r){this.target=e,this.initX=e.x,this.initY=e.y,this.maxDis=r,this.count=t*n,this.rate=n,App.TimerManager.doTimer(1e3/n,this.count,this.shaking,this,this.shakeComplete,this)},e.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)},e.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),App.TimerManager.remove(this.shaking,this)},e.prototype.stop=function(){this.shakeComplete()},e}();__reflect(ShakeUtils.prototype,"ShakeUtils");var StageUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"getInstance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.setup=function(e){this.stage=e,this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTab,this)},t.prototype.onStageTab=function(e){},t.getStageScaleX=function(){return t.getInstance.stage.stageWidth/t.StanderWidth},t.getStageScaleY=function(){return t.getInstance.stage.stageHeight/t.StanderHeight},t.fillFullStageH=function(e){var n=(t.getInstance.stage.stageWidth,t.getInstance.stage.stageHeight);e.width=n/e.height*e.scaleY*e.width,e.height=n},t.centerDisplayToStage=function(e){var n=t.getInstance.stage.stageWidth,r=t.getInstance.stage.stageHeight;e.x=(n-e.width)/2,e.y=(r-e.height)/2},t.setScaleMode=function(e){t.getInstance.stage.scaleMode=e},t.setFrameRate=function(e){t.getInstance.stage.frameRate=e},t.prototype.startFullscreenAdaptation=function(e,t,n){this.designWidth=e,this.designHeight=t,this.resizeCallback=n,this.stageOnResize()},t.prototype.stageOnResize=function(){this.getStage().removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var e=this.designWidth,t=this.designHeight,n=window.innerWidth,r=window.innerHeight,o=n/r,i=e/t,a=o/i;if(o>i){var s=a,c=a;e=Math.floor(e*s),t=Math.floor(t*c)}this.getStage().setContentSize(e,t),this.resizeCallback&&this.resizeCallback(),this.getStage().addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},t.prototype.getStage=function(){return egret.MainContext.instance.stage},t.StanderWidth=750,t.StanderHeight=1334,t}(egret.EventDispatcher);__reflect(StageUtils.prototype,"StageUtils");var TimeUtil=function(){function e(){this._initializeSTime=0,this._initializeCTime=0,this._firstSTime=0,this._isLogin=!1}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.S2H=function(e,t,n){if(void 0===t&&(t=":"),void 0===n&&(n=!0),!(0>e)){var r=Math.floor(e/1e3/60/60).toString(),o=Math.floor(e%36e5/6e4).toString(),i=Math.floor(e%6e4/1e3).toString();if(Number(r)<10&&(r="0"+r),Number(o)<10&&(o="0"+o),Number(i)<10&&(i="0"+i),n)var a=r+t+o+t+i;else var a=o+t+i;return a}},e.getCDTime=function(e){if(!(0>e)){var t=Math.floor(e/1e3/60/60).toString(),n=Math.floor(e%36e5/6e4).toString(),r=Math.floor(e%6e4/1e3).toString();return Number(t)>0?t+"h":Number(n)>0?n+"m":Number(r)>0?r+"s":"0"}},e.conversionTime=function(t){if(0>=t)return"";if(t>=86400){var n=Math.floor(t/86400);return n+"天"}if(t>=3600){var r=Math.floor(t/3600);return r+"小时"}return e.S2H(1e3*t)},e.getHours=function(e){return 0>e?void 0:Math.floor(e/1e3/60/60)},e.fornatStr=function(t){var n=t.split("|"),r={};if(n&&n.length)for(var o=0;o<n.length;o++){var i=e.fornatStr1(n[o]),a={id:i[0],itemtType:i[1],num:i[2]};r[i[0]]=a}return r},e.fornatStr1=function(e,t){void 0===t&&(t="#");var n=e.split(t);return n},e.prototype.getCurServerTime=function(){var e=this._initializeSTime+Math.floor((new Date).getTime()/1e3)-this._initializeCTime;return e},e.prototype.getEndTime=function(e){return this._firstSTime+e},e.prototype.getCDTime=function(e){var t=this.getEndTime(e),n=this.getCurServerTime();return n>=t?0:t-n},e.prototype.getCDTimes=function(e){var t=this.getCurServerTime();if(t>=e)return 0;var n=e-t;return n},e.prototype.synctime=function(e,t){this._initializeCTime=t,this._initializeSTime=e,this._isLogin||(this._firstSTime=e,this._isLogin=!0)},e.prototype.calculationTimestamp=function(e){var t=e-1e3*this.getCurServerTime();return t=Math.floor(t)},e.fornateTimestamp=function(e){var t=new Date;t.setTime(e);var n=t.getTime();return n=Math.floor(n/1e3)},e.getDay=function(e){if(!(0>=e)){var t=new Date;return t.setTime(e),t.getDate()+"天"}},e}();__reflect(TimeUtil.prototype,"TimeUtil");var utils;!function(e){var t;!function(e){function t(e){var t="",n=new Date;return n.setTime(e),t+=n.getFullYear(),t+="-"+a(n),t+="-"+s(n),t+="  "+c(n),t+=":"+u(n),t+=":"+l(n)}function n(e){var t="",n=new Date;return n.setTime(e),t+=n.getFullYear(),t+=a(n),t+=s(n),parseInt(t)}function r(e){var t="",n=new Date;return n.setTime(e),t+=a(n)+"月",t+=s(n)+"日"}function o(e){var t="",n=new Date;return n.setTime(e),t+=c(n),t+=u(n),t+=l(n),parseInt(t)}function i(e){var t="",n=new Date;return n.setTime(e),t+=c(n),t+=":"+u(n)}function a(e){var t="";return t=e.getMonth()+1,parseInt(t)<10&&(t="0"+t),t}function s(e){var t="";return t=e.getDate(),parseInt(t)<10&&(t="0"+t),t}function c(e){var t="";return t=e.getHours(),parseInt(t)<10&&(t="0"+t),t}function u(e){var t="";return t=e.getMinutes(),parseInt(t)<10&&(t="0"+t),t}function l(e){var t="";return t=e.getSeconds(),parseInt(t)<10&&(t="0"+t),t}e.datetimeFormat=t,e.getYYMMDD=n,e.MMDDFormat=r,e.getHHMMSS=o,e.HHMMFormat=i}(t=e.timer||(e.timer={}))}(utils||(utils={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function o(e){t.call(r,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(r))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(r,generateJSON.paths[e])},this):RES.getResByUrl(c,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(r,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var UIUtil=function(){function e(){}return e.createAlert=function(e){var t=e,n=new t;return n.uiName=e+"",n},e.createPanel=function(e,t){void 0===t&&(t=!1);var n=e,r=new n;return t?r.uiName=e+Math.random()+"":r.uiName=e+"",r},e.createScene=function(e){var t=e,n=new t;return n.uiName=e+"",n},e.setFilters=function(e){if(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]}},e.setObjFilters=function(e){if(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]}},e.changeColor=function(e,t){e&&(t?e.textColor=5256759:e.textColor=16711680)},e.setText=function(e,t){if(void 0===t&&(t=""),e){var n=new egret.HtmlTextParser;e.textFlow=n.parser(t)}},e.getHtmlText=function(e){if(""==e)return null;var t=new egret.TextField,n=new egret.HtmlTextParser;return t.textFlow=n.parser(e),t},e}();__reflect(UIUtil.prototype,"UIUtil");var BoneAnimationVO=function(){function e(){this._positionOffset=""}return Object.defineProperty(e.prototype,"currentAnimationName",{get:function(){return this._currentAnimationName},set:function(e){"0"!=e&&(this._currentAnimationName=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detectFrameEvent",{get:function(){return this._detectFrameEvent},set:function(e){this._detectFrameEvent=1==Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeAtLastFrame",{get:function(){return this._removeAtLastFrame},set:function(e){this._removeAtLastFrame=1==Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPauseAtLastFrame",{get:function(){return this._isPauseAtLastFrame},set:function(e){this._isPauseAtLastFrame=1==Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeWhenRemoveFromStage",{get:function(){return this._removeWhenRemoveFromStage},set:function(e){this._removeWhenRemoveFromStage=1==Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionOffset",{get:function(){return this._positionOffset},set:function(e){"0"!=e&&(this._positionOffset=e)},enumerable:!0,configurable:!0}),e}();__reflect(BoneAnimationVO.prototype,"BoneAnimationVO");var ServerConfigVO=function(){function e(){}return e}();__reflect(ServerConfigVO.prototype,"ServerConfigVO");var SoundVO=function(){function e(){}return e}();__reflect(SoundVO.prototype,"SoundVO");var BlockItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=SkinName.BlockItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),t.addEvents()},t.prototype.setColor=function(e){var t=this;t.icon.source="game_json.item"+e},t.prototype.addEvents=function(){},t.prototype.removeEvents=function(){},t.prototype.dispose=function(){var e=this;e.removeEvents(),DisplayUtils.removeFromParent(e)},t}(eui.Component);__reflect(BlockItem.prototype,"BlockItem");var TetrisItem=function(e){function t(){var t=e.call(this)||this;return t.shapeList=[[[1]],[[1,1]],[[1],[1]],[[1,1,1]],[[1],[1],[1]],[[1,0],[1,1]],[[0,1],[1,1]],[[1,1],[0,1]],[[1,1],[1,0]],[[1,1],[1,1]],[[1,1,1,1]],[[1],[1],[1],[1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[0,1],[1,1],[1,0]],[[1,0],[1,1],[0,1]],[[1,1],[1,0],[1,0]],[[1,1],[0,1],[0,1]],[[1,0],[1,0],[1,1]],[[0,1],[0,1],[1,1]],[[1,1,1],[0,0,1]],[[1,1,1],[1,0,0]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]],[[1,1,1,1,1]],[[1],[1],[1],[1],[1]],[[1,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[1,0,0]],[[0,0,1],[0,0,1],[1,1,1]],[[1,0,0],[1,0,0],[1,1,1]]],t.weightList=[8,4,4,4,4,2,2,2,2,8,4,4,2,2,2,2,1,1,1,1,1,1,1,1,4,4,2,2,2,2],t.myShape=[],t.shapeBox=new egret.Sprite,t.totalWeight=0,t.shapeLen=0,t.skinName=SkinName.TetrisItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),t.initData(),t.initView(),t.addEvent()},t.prototype.initView=function(){var e=this;e.addChild(e.shapeBox),e.creatShape(e.shapeList[e.getRandomShape()])},t.prototype.initData=function(){var e=this;e.totalWeight=0,e.shapeLen=e.weightList.length;for(var t=0;t<e.shapeLen;t++)e.totalWeight+=e.weightList[t]},t.prototype.getRandomShape=function(){for(var e=this,t=Math.floor(e.totalWeight*Math.random())+1,n=0;n<e.shapeLen;n++){if(t<=e.weightList[n])return n;t-=e.weightList[n]}return 0},t.prototype.creatShape=function(e){var t=this;t.myShape=e.concat();var n=Math.floor(6*Math.random())+1,r=t.myShape.length;DisplayUtils.removeAllChildren(t.shapeBox);for(var o=0;r>o;o++)for(var i=t.myShape[o].length,a=0;i>a;a++)if(0!=t.myShape[o][a]){var s=new BlockItem;s.setColor(n),s.x=a*s.width,s.y=o*s.height,t.shapeBox.addChild(s)}},t.prototype.showAllShape=function(){var e=this;e.shapeList[Math.floor(e.shapeLen*Math.random())];console.log("self.shapeLen :"+e.shapeLen);for(var t=0;t<e.shapeLen;t++){for(var n=e.shapeList[t].length,r=new egret.Sprite,o=Math.floor(6*Math.random())+1,i=0;n>i;i++)for(var a=e.shapeList[t][i].length,s=0;a>s;s++)if(0!=e.shapeList[t][i][s]){var c=new BlockItem;c.setColor(o),c.x=s*c.width,c.y=i*c.height,r.addChild(c)}r.x=t%4*150,r.y=150*Math.floor(t/4),r.scaleX=r.scaleY=.4,e.addChild(r)}},t.prototype.addEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickhandler,e)},t.prototype.removeEvent=function(){var e=this;e.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.clickhandler,e)},t.prototype.clickhandler=function(){var e=this;e.creatShape(e.shapeList[e.getRandomShape()])},t.prototype.dispose=function(){var e=this;e.removeEvent(),DisplayUtils.removeFromParent(e)},t}(eui.Component);__reflect(TetrisItem.prototype,"TetrisItem");var PlayerInfo=function(){function e(){}return e}();__reflect(PlayerInfo.prototype,"PlayerInfo");var SkinName=function(){function e(){}return e.LoginViewSkin="resource/gameSkins/login/LoginViewSkin.exml",e.GameMainViewSkin="resource/gameSkins/game/GameMainViewSkin.exml",e.BlockItemSkin="resource/gameSkins/game/BlockItemSkin.exml",e.TetrisItemSkin="resource/gameSkins/game/TetrisItemSkin.exml",e}();__reflect(SkinName.prototype,"SkinName");